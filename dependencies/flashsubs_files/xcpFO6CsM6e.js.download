if (self.CavalryLogger) { CavalryLogger.start_js(["qptfI"]); }

__d("FundsAvailability",[],(function a(b,c,d,e,f,g){f.exports={FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85};}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"};}),null);
__d("MNCommerceBubbleType",[],(function a(b,c,d,e,f,g){f.exports={FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14};}),null);
__d("MNCommerceCallToActionType",[],(function a(b,c,d,e,f,g){f.exports={OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14};}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){f.exports={TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",MEDIA:"media"};}),null);
__d("PaymentModulesClient",[],(function a(b,c,d,e,f,g){f.exports={DONATION_P4P:"donation_p4p",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",MOCK:"mock"};}),null);
__d("ServicesCalendarSyncType",[],(function a(b,c,d,e,f,g){f.exports={CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"};}),null);
__d('bs_char',['bs_caml_string','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(m){if(m<0||m>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Char.chr"];}else return m;}function i(m){var n=0;if(m>=40){if(m!==92){n=m>=127?1:2;}else return "\\\\";}else if(m>=32){if(m>=39){return "\\'";}else n=2;}else if(m>=14){n=1;}else switch(m){case 8:return "\\b";case 9:return "\\t";case 10:return "\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:n=1;break;case 13:return "\\r";}switch(n){case 1:var o=new Array(4);o[0]=92;o[1]=48+(m/100|0)|0;o[2]=48+(m/10|0)%10|0;o[3]=48+m%10|0;return c('bs_caml_string').bytes_to_string(o);case 2:var p=new Array(1);p[0]=m;return c('bs_caml_string').bytes_to_string(p);}}function j(m){if(m>=65&&m<=90||m>=192&&m<=214||m>=216&&m<=222){return m+32|0;}else return m;}function k(m){if(m>=97&&m<=122||m>=224&&m<=246||m>=248&&m<=254){return m-32|0;}else return m;}function l(m,n){return m-n|0;}g.chr=h;g.escaped=i;g.lowercase=j;g.uppercase=k;g.compare=l;}),null);
__d('bs_bytes',['bs_char','bs_list','bs_curry','bs_caml_obj','bs_caml_int32','bs_pervasives','bs_caml_string','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);c('bs_caml_string').caml_fill_string(va,0,ta,ua);return va;}function i(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);for(var wa=0,xa=ta-1|0;wa<=xa;++wa)va[wa]=c('bs_curry')._1(ua,wa);return va;}var j=[];function k(ta){var ua=ta.length,va=c('bs_caml_string').caml_create_string(ua);c('bs_caml_string').caml_blit_bytes(ta,0,va,0,ua);return va;}function l(ta){return c('bs_caml_string').bytes_to_string(k(ta));}function m(ta){return k(c('bs_caml_string').bytes_of_string(ta));}function n(ta,ua,va){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.sub / Bytes.sub"];}else{var wa=c('bs_caml_string').caml_create_string(va);c('bs_caml_string').caml_blit_bytes(ta,ua,wa,0,va);return wa;}}function o(ta,ua,va){return c('bs_caml_string').bytes_to_string(n(ta,ua,va));}function p(ta,ua,va){var wa=(ta.length+ua|0)+va|0,xa=c('bs_caml_string').caml_create_string(wa),ya=ua<0?[-ua|0,0]:[0,ua],za=ya[1],ab=ya[0],bb=c('bs_pervasives').min(ta.length-ab|0,wa-za|0);if(bb>0)c('bs_caml_string').caml_blit_bytes(ta,ab,xa,za,bb);return xa;}function q(ta,ua,va,wa){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.fill / Bytes.fill"];}else return c('bs_caml_string').caml_fill_string(ta,ua,va,wa);}function r(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Bytes.blit"];}else return c('bs_caml_string').caml_blit_bytes(ta,ua,va,wa,xa);}function s(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.blit / Bytes.blit_string"];}else return c('bs_caml_string').caml_blit_string(ta,ua,va,wa,xa);}function t(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._1(ta,ua[va]);return 0;}function u(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._2(ta,va,ua[va]);return 0;}function v(ta,ua){if(ua){var va=ua[0],wa=[0],xa=[0];c('bs_list').iter(function(ab){wa[0]=wa[0]+1|0;xa[0]=xa[0]+ab.length|0;return 0;},ua);var ya=c('bs_caml_string').caml_create_string(xa[0]+c('bs_caml_int32').imul(ta.length,wa[0]-1|0)|0);c('bs_caml_string').caml_blit_bytes(va,0,ya,0,va.length);var za=[va.length];c('bs_list').iter(function(ab){c('bs_caml_string').caml_blit_bytes(ta,0,ya,za[0],ta.length);za[0]=za[0]+ta.length|0;c('bs_caml_string').caml_blit_bytes(ab,0,ya,za[0],ab.length);za[0]=za[0]+ab.length|0;return 0;},ua[1]);return ya;}else return j;}function w(ta,ua){return ta.concat(ua);}function x(ta){var ua=ta-9|0;if(ua>4||ua<0){if(ua!==23){return 0;}else return 1;}else if(ua!==2){return 1;}else return 0;}function y(ta){var ua=ta.length,va=0;while(va<ua&&x(ta[va]))va=va+1|0;var wa=ua-1|0;while(wa>=va&&x(ta[wa]))wa=wa-1|0;if(wa>=va){return n(ta,va,(wa-va|0)+1|0);}else return j;}function z(ta){var ua=0;for(var va=0,wa=ta.length-1|0;va<=wa;++va){var xa=ta[va],ya;if(xa>=32){var za=xa-34|0;ya=za>58||za<0?za>=93?4:1:za>57||za<1?2:1;}else ya=xa>=11?xa!==13?4:2:xa>=8?2:4;ua=ua+ya|0;}if(ua===ta.length){return k(ta);}else{var ab=c('bs_caml_string').caml_create_string(ua);ua=0;for(var bb=0,cb=ta.length-1|0;bb<=cb;++bb){var db=ta[bb],eb=0;if(db>=35){if(db!==92){if(db>=127){eb=1;}else ab[ua]=db;}else eb=2;}else if(db>=32){if(db>=34){eb=2;}else ab[ua]=db;}else if(db>=14){eb=1;}else switch(db){case 8:ab[ua]=92;ua=ua+1|0;ab[ua]=98;break;case 9:ab[ua]=92;ua=ua+1|0;ab[ua]=116;break;case 10:ab[ua]=92;ua=ua+1|0;ab[ua]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:eb=1;break;case 13:ab[ua]=92;ua=ua+1|0;ab[ua]=114;break;}switch(eb){case 1:ab[ua]=92;ua=ua+1|0;ab[ua]=48+(db/100|0)|0;ua=ua+1|0;ab[ua]=48+(db/10|0)%10|0;ua=ua+1|0;ab[ua]=48+db%10|0;break;case 2:ab[ua]=92;ua=ua+1|0;ab[ua]=db;break;}ua=ua+1|0;}return ab;}}function aa(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._1(ta,ua[xa]);return wa;}else return ua;}function ba(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._2(ta,xa,ua[xa]);return wa;}else return ua;}function ca(ta){return aa(c('bs_char').uppercase,ta);}function da(ta){return aa(c('bs_char').lowercase,ta);}function ea(ta,ua){if(ua.length){var va=k(ua);va[0]=c('bs_curry')._1(ta,ua[0]);return va;}else return ua;}function fa(ta){return ea(c('bs_char').uppercase,ta);}function ga(ta){return ea(c('bs_char').lowercase,ta);}function ha(ta,ua,va,wa){while(true){var xa=va;if(xa>=ua){throw c('bs_caml_builtin_exceptions').not_found;}else if(ta[xa]===wa){return xa;}else{va=xa+1|0;continue;}}}function ia(ta,ua){return ha(ta,ta.length,0,ua);}function ja(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.index_from / Bytes.index_from"];}else return ha(ta,wa,ua,va);}function ka(ta,ua,va){while(true){var wa=ua;if(wa<0){throw c('bs_caml_builtin_exceptions').not_found;}else if(ta[wa]===va){return wa;}else{ua=wa-1|0;continue;}}}function la(ta,ua){return ka(ta,ta.length-1|0,ua);}function ma(ta,ua,va){if(ua<-1||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rindex_from / Bytes.rindex_from"];}else return ka(ta,ua,va);}function na(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.contains_from / Bytes.contains_from"];}else try{ha(ta,wa,ua,va);return 1;}catch(xa){if(xa===c('bs_caml_builtin_exceptions').not_found){return 0;}else throw xa;}}function oa(ta,ua){return na(ta,0,ua);}function pa(ta,ua,va){if(ua<0||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];}else try{ka(ta,ua,va);return 1;}catch(wa){if(wa===c('bs_caml_builtin_exceptions').not_found){return 0;}else throw wa;}}var qa=c('bs_caml_obj').caml_compare,ra=c('bs_caml_string').bytes_to_string,sa=c('bs_caml_string').bytes_of_string;g.make=h;g.init=i;g.empty=j;g.copy=k;g.of_string=m;g.to_string=l;g.sub=n;g.sub_string=o;g.extend=p;g.fill=q;g.blit=r;g.blit_string=s;g.concat=v;g.cat=w;g.iter=t;g.iteri=u;g.map=aa;g.mapi=ba;g.trim=y;g.escaped=z;g.index=ia;g.rindex=la;g.index_from=ja;g.rindex_from=ma;g.contains=oa;g.contains_from=na;g.rcontains_from=pa;g.uppercase=ca;g.lowercase=da;g.capitalize=fa;g.uncapitalize=ga;g.compare=qa;g.unsafe_to_string=ra;g.unsafe_of_string=sa;}),null);
__d('bs_js_undefined',[],(function a(b,c,d,e,f,g){'use strict';function h(k,l){if(k!==undefined){return l(k);}else return undefined;}function i(k,l){if(k!==undefined){return l(k);}else return 0;}function j(k){if(k){return k[0];}else return undefined;}g.bind=h;g.iter=i;g.from_opt=j;}),null);
__d('bs_string',['bs_list','bs_bytes','bs_caml_int32','bs_caml_string'],(function a(b,c,d,e,f,g){'use strict';function h(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').make(ha,ia));}function i(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').init(ha,ia));}function j(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').copy(c('bs_caml_string').bytes_of_string(ha)));}function k(ha,ia,ja){return c('bs_caml_string').bytes_to_string(c('bs_bytes').sub(c('bs_caml_string').bytes_of_string(ha),ia,ja));}function l(ha,ia){if(ia){var ja=ia[0],ka=[0],la=[0];c('bs_list').iter(function(oa){ka[0]=ka[0]+1|0;la[0]=la[0]+oa.length|0;return 0;},ia);var ma=c('bs_caml_string').caml_create_string(la[0]+c('bs_caml_int32').imul(ha.length,ka[0]-1|0)|0);c('bs_caml_string').caml_blit_string(ja,0,ma,0,ja.length);var na=[ja.length];c('bs_list').iter(function(oa){c('bs_caml_string').caml_blit_string(ha,0,ma,na[0],ha.length);na[0]=na[0]+ha.length|0;c('bs_caml_string').caml_blit_string(oa,0,ma,na[0],oa.length);na[0]=na[0]+oa.length|0;return 0;},ia[1]);return c('bs_caml_string').bytes_to_string(ma);}else return "";}function m(ha,ia){return c('bs_bytes').iter(ha,c('bs_caml_string').bytes_of_string(ia));}function n(ha,ia){return c('bs_bytes').iteri(ha,c('bs_caml_string').bytes_of_string(ia));}function o(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').map(ha,c('bs_caml_string').bytes_of_string(ia)));}function p(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').mapi(ha,c('bs_caml_string').bytes_of_string(ia)));}function q(ha){var ia=ha-9|0;if(ia>4||ia<0){if(ia!==23){return 0;}else return 1;}else if(ia!==2){return 1;}else return 0;}function r(ha){if(ha===""||!(q(ha.charCodeAt(0))||q(ha.charCodeAt(ha.length-1|0)))){return ha;}else return c('bs_caml_string').bytes_to_string(c('bs_bytes').trim(c('bs_caml_string').bytes_of_string(ha)));}function s(ha){var ia=function ja(ka){while(true){var la=ka;if(la>=ha.length){return 0;}else{var ma=ha.charCodeAt(la);if(ma>=32){var na=ma-34|0;if(na>58||na<0){if(na>=93){return 1;}else{ka=la+1|0;continue;}}else if(na>57||na<1){return 1;}else{ka=la+1|0;continue;}}else return 1;}}};if(ia(0)){return c('bs_caml_string').bytes_to_string(c('bs_bytes').escaped(c('bs_caml_string').bytes_of_string(ha)));}else return ha;}function t(ha,ia){return c('bs_bytes').index(c('bs_caml_string').bytes_of_string(ha),ia);}function u(ha,ia){return c('bs_bytes').rindex(c('bs_caml_string').bytes_of_string(ha),ia);}function v(ha,ia,ja){return c('bs_bytes').index_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function w(ha,ia,ja){return c('bs_bytes').rindex_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function x(ha,ia){return c('bs_bytes').contains(c('bs_caml_string').bytes_of_string(ha),ia);}function y(ha,ia,ja){return c('bs_bytes').contains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function z(ha,ia,ja){return c('bs_bytes').rcontains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function aa(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uppercase(c('bs_caml_string').bytes_of_string(ha)));}function ba(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').lowercase(c('bs_caml_string').bytes_of_string(ha)));}function ca(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').capitalize(c('bs_caml_string').bytes_of_string(ha)));}function da(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uncapitalize(c('bs_caml_string').bytes_of_string(ha)));}var ea=c('bs_caml_string').caml_string_compare,fa=c('bs_bytes').fill,ga=c('bs_bytes').blit_string;g.make=h;g.init=i;g.copy=j;g.sub=k;g.fill=fa;g.blit=ga;g.concat=l;g.iter=m;g.iteri=n;g.map=o;g.mapi=p;g.trim=r;g.escaped=s;g.index=t;g.rindex=u;g.index_from=v;g.rindex_from=w;g.contains=x;g.contains_from=y;g.rcontains_from=z;g.uppercase=aa;g.lowercase=ba;g.capitalize=ca;g.uncapitalize=da;g.compare=ea;}),null);
__d('MessagingTagUtils',['MessagingSourceEnum','MessagingTagConstants','MercuryMessageSourceTags','Set'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('Set'))(Object.values(c('MessagingSourceEnum')));function i(l){for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p;if(h.has(q))return q;}return c('MessagingSourceEnum').UNKNOWN;}function j(l){for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p,r=q.split(c('MessagingTagConstants').app_id_root);if(r.length>1)return r[1].trim();}return null;}function k(l,m){var n=[],o=j(l);if(o&&c('MessagingTagConstants').orca_app_ids.indexOf(o)!==-1)n.push(c('MercuryMessageSourceTags').MESSENGER);if(c('MessagingTagConstants').chat_sources.indexOf(m)!==-1)n.push(c('MercuryMessageSourceTags').CHAT);if(c('MessagingTagConstants').email_source===m)n.push(c('MercuryMessageSourceTags').EMAIL);if(c('MessagingTagConstants').mobile_sources.indexOf(m)!==-1)n.push(c('MercuryMessageSourceTags').MOBILE);return n;}f.exports={getSourceFromTags:i,getSourceTags:k};}),null);
__d('messengerStoryAttachmentTransformerRe',['fbt','URI','bs_array','bs_string','bs_caml_array','bs_js_boolean','bs_caml_format','CurrentUser','bs_js_primitive','bs_js_undefined','FundsAvailability','bs_js_null_undefined','P2PTransferStatus','MNCommerceBubbleType','PaymentModulesClient','MercuryAttachmentType','bs_caml_builtin_exceptions','P2PPaymentRequestStatus','ServicesCalendarSyncType','MNCommerceCallToActionType','MNCommerceShipmentTrackingEventTypes'],(function a(b,c,d,e,f,g,h){'use strict';function i(sa){return c('bs_array').map(function(ta){var ua=ta.user_confirmation,va=c('bs_js_primitive').is_nil_undef(ua)?[null,null,null,null,false]:[ua.cancel_button_label,ua.continue_button_label,ua.confirmation_message,ua.confirmation_title,true],wa=ta.payment_metadata;return {action_link:ta.action_link,action_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MNCommerceCallToActionType')[ta.action_open_type])),title:ta.title,confirmation_cancel_label:va[0],confirmation_continue_label:va[1],confirmation_message:va[2],confirmation_title:va[3],id:ta.id,is_disabled:ta.is_disabled,is_mutable_by_server:ta.is_mutable_by_server,payment_metadata:c('bs_js_primitive').is_nil_undef(wa)?{payment_module_config:null,total_price:null}:{payment_module_config:wa.payment_module_config,total_price:wa.total_price},render_style:ta.render_style,webview_metadata:{messenger_extensions:ta.webview_metadata.messenger_extensions,webview_height_ratio:ta.webview_metadata.webview_height_ratio,webview_share_button:ta.webview_metadata.webview_share_button},should_show_user_confirmation:va[4]};},sa);}function j(sa){return c('bs_array').map(function(ta){var ua=ta.url,va=c('bs_js_primitive').is_nil_undef(ua)?null:new (c('URI'))(ua).getUnqualifiedURI().toString();return {title:ta.title,uri:va};},sa);}function k(sa){if(!c('bs_js_primitive').is_nil_undef(sa)&&sa!==""){return "#"+c('bs_string').sub(sa,2,sa.length-2|0);}else return null;}function l(sa){if(c('bs_js_primitive').is_nil_undef(sa)){return null;}else return {url:sa.uri,src:sa.uri,width:sa.width,height:sa.height};}function m(sa){return {id:sa.id,name:sa.name,desc:sa.desc,thumb_url:sa.thumb_url,item_url:sa.item_url,title:sa.name,text:sa.desc,source:sa.source,image_aspect_ratio:sa.image_aspect_ratio,metalines:{metaline_1:sa.first_metaline,metaline_2:sa.second_metaline,metaline_3:sa.third_metaline},call_to_actions:i(sa.call_to_actions)};}function n(sa){return {city:sa.city,country:sa.country,latitude:sa.latitude,longitude:sa.longitude,postal_code:sa.postal_code,state:sa.state,street_1:sa.streets.length?c('bs_caml_array').caml_array_get(sa.streets,0):null,street_2:sa.streets.length>1?c('bs_caml_array').caml_array_get(sa.streets,1):null,timezone:sa.timezone};}function o(sa){var ta=sa.retail_carrier,ua=sa.shipdate_for_display,va={};c('bs_array').iter(function(bb){var cb=bb.messenger_commerce_location;if(c('bs_js_primitive').is_nil_undef(cb)){return 0;}else{va[bb.id]=n(cb);return 0;}},sa.shipment_tracking_events.nodes);var wa={};c('bs_array').iter(function(bb){var cb=m(bb);wa[cb.id]=cb;return 0;},sa.retail_shipment_items.nodes);var xa=ta.logo,ya=ta.legal_terms_of_service_text,za=sa.receipt,ab=sa.recipient;return {id:sa.id,shipment_id:sa.id,tracking_number:sa.tracking_number,carrier:ta.name,carrier_tracking_url:ta.carrier_tracking_url,carrier_logo:c('bs_js_primitive').is_nil_undef(xa)?null:{url:xa.uri,width:xa.width,height:xa.height},display_ship_date:ua,estimated_delivery_display_time:sa.estimated_delivery_time_for_display,origin:n(sa.commerce_origin),destination:n(sa.commerce_destination),items:wa,tracking_event_polyline:va,legal_text:c('bs_js_primitive').is_nil_undef(ya)?null:ya.text,receipt_id:c('bs_js_primitive').is_nil_undef(za)?null:za.receipt_id,recipient_name:c('bs_js_primitive').is_nil_undef(ab)?null:ab.name,delivered:c('bs_array').fold_left(function(bb,cb){if(cb.shipment_tracking_event_type==="DELIVERED"){return true;}else return bb;},false,sa.shipment_tracking_events.nodes),messenger_commerce_bubble_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MNCommerceBubbleType')[sa.bubble_type]))};}function p(sa){var ta=sa.shipment.estimated_delivery_time_for_display,ua=sa.shipment.shipdate_for_display,va=sa.shipment.retail_carrier,wa={};c('bs_array').iter(function(za){var ab=za.messenger_commerce_location;if(c('bs_js_primitive').is_nil_undef(ab)){return 0;}else{wa[za.id]=n(ab);return 0;}},sa.shipment.shipment_tracking_events.nodes);var xa=sa.messenger_commerce_location,ya=va.logo;return {id:sa.id,shipment_id:sa.shipment.id,tracking_number:sa.shipment.tracking_number,display_ship_date:ua,estimated_delivery_display_time:ta===""?ua:ta,origin:n(sa.shipment.commerce_origin),destination:n(sa.shipment.commerce_destination),carrier:va.name,carrier_tracking_url:va.carrier_tracking_url,display_time:sa.tracking_event_time_for_display,tracking_event_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MNCommerceShipmentTrackingEventTypes')[sa.shipment_tracking_event_type])),tracking_event_location:c('bs_js_primitive').is_nil_undef(xa)?null:n(xa),tracking_event_description:sa.tracking_event_description,tracking_event_polyline:wa,carrier_logo:c('bs_js_primitive').is_nil_undef(ya)?null:{url:ya.uri,width:ya.width,height:ya.height},items:c('bs_array').map(m,sa.shipment.retail_shipment_items.nodes),messenger_commerce_bubble_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MNCommerceBubbleType')[sa.bubble_type])),delivered:c('bs_js_boolean').to_js_boolean(+(sa.shipment_tracking_event_type==="DELIVERED"))};}function q(sa){var ta=sa.itinerary_legs.nodes,ua=[],va=[];c('bs_array').iter(function(wa){var xa=wa.segments.nodes;c('bs_array').iter(function(ya){var za=ya.flight_info;ua.push({departure_datetime_for_display:za.departure_time_info.formatted_datetime_for_display,destination_airport_code:za.arrival_airport.airport_code,destination_airport_name:za.arrival_airport.city,labels:wa.number_of_stops_label,source_airport_code:za.departure_airport.airport_code,source_airport_name:za.departure_airport.city});return 0;},xa);c('bs_array').iter(function(ya){var za=ya.flight_info,ab=za.arrival_time_info;va.push({flight_info:{aircraft_type:za.aircraft_type,arrival_airport:{airport_code:za.arrival_airport.airport_code,city:za.arrival_airport.city,terminal:za.arrival_airport.terminal},arrival_time:c('bs_js_primitive').is_nil_undef(ab)?null:ab.formatted_time_for_display,departure_airport:{airport_code:za.departure_airport.airport_code,city:za.departure_airport.city,terminal:za.departure_airport.terminal},departure_date:za.departure_time_info.formatted_date_for_display,departure_time:za.departure_time_info.formatted_time_for_display,flight_number:za.flight_number},passenger:c('bs_array').map(function(bb){return {name:bb.passenger.name,passenger:{name:bb.passenger.name,ticket_number:bb.passenger.ticket_number},product_infos:c('bs_array').map(function(cb){return {title:cb.title,value:cb.value};},bb.product_items),seat:bb.seat,seat_type:bb.seat_type,travel_class:bb.travel_class};},ya.passenger_details)});return 0;},xa);return 0;},ta);return {base_cost:sa.formatted_base_price,confirmation_number:sa.confirmation_number,logo:l(sa.logo),passenger_names:c('bs_array').map(function(wa){return wa.name;},sa.passenger_infos),pnr_number:sa.pnr_number,price_info:c('bs_array').map(function(wa){return {title:wa.title,value:wa.formatted_amount};},sa.itemized_price_infos),tax:sa.formatted_tax,theme_color:k(sa.tint_color),total_cost:sa.formatted_total,connections:ua,labels:{aircraft_type_label:sa.aircraft_type_label,arrival_time_label:sa.arrival_time_label,base_price_label:sa.base_price_label,booking_number_label:sa.booking_number_label,cabin_type_label:sa.cabin_type_label,departure_time_label:sa.departure_time_label,flight_confirmation_label:sa.flight_confirmation_label,flight_date_label:sa.flight_date_label,flight_label:sa.flight_label,flight_terminal_label:sa.flight_terminal_label,itinerary_error_title_label:sa.itinerary_error_title_label,itinerary_title_label:sa.itinerary_title_label,passenger_name_label:sa.passenger_name_label,passenger_names_label:sa.passenger_names_label,passenger_seat_label:sa.passenger_seat_label,purchase_summary_label:sa.purchase_summary_label,taxes_label:sa.taxes_label,total_label:sa.total_label,view_details_cta_label:sa.view_details_cta_label},flight_segments:va};}function r(sa){var ta=sa.flight_info,ua=ta.arrival_time_info;return {pnr_number:sa.pnr_number,theme_color:k(sa.tint_color),update_type:sa.update_type,hightlighted_labels:sa.hightlighted_labels,labels:{arrival_time_label:sa.arrival_time_label,booking_number_label:sa.booking_number_label,departure_time_label:sa.departure_time_label,flight_gate_label:sa.flight_gate_label,flight_label:sa.flight_label,flight_status_label:sa.flight_status_label,passenger_names_label:sa.passenger_names_label,passenger_seat_label:sa.passenger_seat_label},logo:l(sa.logo),update_flight_info:{arrival_airport:{airport_code:ta.arrival_airport.airport_code,city:ta.arrival_airport.city},arrival_time:c('bs_js_primitive').is_nil_undef(ua)?null:ua.formatted_time_for_display,departure_airport:{airport_code:ta.departure_airport.airport_code,city:ta.departure_airport.city},departure_gate:ta.departure_airport.gate,flight_number:ta.flight_number,departure_time:ta.departure_time_info.formatted_time_for_display}};}function s(sa){var ta=c('bs_array').map(function(ua){var va=ua.arrival_time_info;return {arrival_airport:{airport_code:ua.arrival_airport.airport_code,city:ua.arrival_airport.city},departure_airport:{airport_code:ua.departure_airport.airport_code,city:ua.departure_airport.city},flight_number:ua.flight_number,departure_time:ua.departure_time_info.formatted_time_for_display,arrival_time:c('bs_js_primitive').is_nil_undef(va)?null:va.formatted_time_for_display};},sa.flight_infos);return {pnr_number:sa.pnr_number,theme_color:k(sa.tint_color),checkin_url:sa.checkin_url,flight_info:ta,labels:{flight_label:sa.flight_label,arrival_time_label:sa.arrival_time_label,departure_time_label:sa.departure_time_label,checkin_cta_label:sa.checkin_cta_label,booking_number_label:sa.booking_number_label},logo:l(sa.logo)};}function t(sa){var ta=sa.boarding_passes.nodes,ua;if(ta.length){var va=c('bs_caml_array').caml_array_get(ta,0),wa=va.flight_info,xa=wa.boarding_time_info;ua={flight_number:wa.flight_number,boarding_time_for_display:c('bs_js_primitive').is_nil_undef(xa)?null:xa.formatted_time_for_display,departure_time_for_display:wa.departure_time_info.formatted_time_for_display,departure_terminal:wa.departure_airport.terminal,departure_gate:wa.departure_airport.gate,destination_airport_code:wa.arrival_airport.airport_code,destination_airport_name:wa.arrival_airport.city,source_airport_code:wa.departure_airport.airport_code,source_airport_name:wa.departure_airport.city};}else ua=null;return {flight_information:ua,theme_color:k(sa.tint_color),passenger_seat_assignment:c('bs_array').map(function(ya){return {name:ya.passenger.passenger.name,seat:ya.passenger.seat};},ta),labels:{flight_label:sa.flight_label,boarding_time_label:sa.boarding_time_label,departure_label:sa.departure_label,passenger_names_label:sa.passenger_names_label,passenger_seat_label:sa.passenger_seat_label,flight_terminal_label:sa.flight_terminal_label,flight_gate_label:sa.flight_gate_label,view_boarding_pass_cta_label:sa.view_boarding_pass_cta_label,share_cta_label:sa.share_cta_label,message_cta_label:sa.message_cta_label,boarding_pass_title_label:sa.boarding_pass_title_label,boarding_pass_error_title_label:sa.boarding_pass_error_title_label},logo:l(sa.logo),boarding_pass:c('bs_array').map(function(ya){var za=ya.header_text_field;return {source_page_id:0,logo_image_url:ya.airline_logo_image_url,header_image_url:ya.header_image_url,auxiliary_fields:c('bs_array').map(function(ab){return {label:ab.title,value:ab.value};},ya.auxiliary_fields),secondary_fields:c('bs_array').map(function(ab){return {label:ab.title,value:ab.value};},ya.secondary_fields),qr_code_header_image_url:ya.qr_code_header_image_url,qr_code_url:ya.qr_code_image_url,passenger_name:ya.passenger.passenger.name,header_text_field:c('bs_js_primitive').is_nil_undef(za)?null:{label:za.title,value:za.value}};},ta)};}function u(sa,ta){var ua=ta.cover_photo,va;if(c('bs_js_primitive').is_nil_undef(ua)){va=[null,null,null];}else{var wa=ua.photo.image,xa=c('bs_js_primitive').is_nil_undef(wa)?[null,null]:[wa.uri,{height:wa.height,width:wa.width}];va=[ua.photo.id,xa[0],xa[1]];}var ya=ta.location,za=c('bs_js_primitive').is_nil_undef(ya)?[null,null]:[ya.latitude,ya.longitude],ab=ta.overall_star_rating;return {address:ta.address.single_line_full_address,category:ta.top_category_name,coverPhotoID:va[0],coverPhotoURL:va[1],coverPhotoDimensions:va[2],latitude:za[0],longitude:za[1],name:ta.name,rating:c('bs_js_primitive').is_nil_undef(ab)?null:ab.value,pageID:ta.id,priceRange:ta.price_range_description,viewerID:sa};}function v(sa){var ta=sa.group_commerce_item_seller,ua=sa.primary_photo,va;if(c('bs_js_primitive').is_nil_undef(ua)){va=null;}else{var wa=ua.image;va=c('bs_js_primitive').is_nil_undef(wa)?null:wa.uri;}return {caption:sa.group_commerce_item_description.text,desc:sa.group_commerce_item_description.text,owner_id:c('bs_js_primitive').is_nil_undef(ta)?null:ta.id,price:sa.formatted_price.text,text:sa.group_commerce_item_description.text,title:sa.group_commerce_item_title,thumb_url:va,url:sa.url};}function w(sa){return {app_name:sa.application_name,artists:sa.artist_names,audio_url:sa.audio_url,duration_ms:sa.duration_ms,title:sa.music_title};}function x(sa){var ta=sa.payment;return {id:sa.id,desc:sa.desc,display_total_cost:sa.total_cost,merchant_name:sa.merchant_name,target_url:sa.target_url,thumb_url:sa.thumb_url,raw_amount:sa.raw_amount,payment_id:c('bs_js_primitive').is_nil_undef(ta)?null:ta.id,total_cost:{amount:c('bs_caml_format').caml_float_of_string(sa.price_amount),currency:sa.price_currency},name:sa.name};}function y(sa){return {id:sa.id,canDonate:sa.canDonate,hasViewerDonated:sa.hasViewerDonated,fundraiserDetailedProgressText:sa.fundraiserDetailedProgressText,fundraiserSubtitleText:sa.fundraiserSubtitleText,focusedCoverPhoto:sa.focusedCoverPhoto};}function z(sa){return {id:sa.id,name:sa.name,desc:sa.desc,thumb_url:sa.thumb_url,item_url:sa.item_url,title:sa.name,text:sa.desc,source:sa.source,image_aspect_ratio:sa.image_aspect_ratio,metalines:{metaline_1:sa.first_metaline,metaline_2:sa.second_metaline,metaline_3:sa.third_metaline},call_to_actions:i(sa.call_to_actions)};}function aa(sa){var ta=sa.guestStatus,ua=sa.event_place,va=sa.social_context;return {eventID:sa.eventID,guestStatus:c('bs_js_primitive').is_nil_undef(ta)?"unknown":c('bs_string').lowercase(ta),canViewerJoin:sa.canViewerJoin,timeString:sa.timeString,locationString:c('bs_js_primitive').is_nil_undef(ua)?null:ua.name,socialOrTimeContextString:c('bs_js_primitive').is_nil_undef(va)?null:va.text,connectedButtonText:h._("Joined"),unconnectedButtonText:h._("Going"),watchStatus:c('bs_string').lowercase(sa.watchStatus),showInterestedAction:c('bs_js_boolean').to_js_boolean(+(sa.connection_style==="INTERESTED")),canViewerWatch:sa.canViewerWatch};}function ba(sa){var ta=function rb(sb){var tb=sb.page_call_to_action;if(c('bs_js_primitive').is_nil_undef(tb)){return undefined;}else return tb.id;},ua=function rb(sb){var tb=sb.page_call_to_action;if(c('bs_js_primitive').is_nil_undef(tb)){return false;}else{var ub=tb.component_flow_service_config;if(c('bs_js_primitive').is_nil_undef(ub)){return false;}else return true;}},va=sa.page,wa=c('bs_js_primitive').is_nil_undef(va)?[undefined,undefined,undefined,false]:[va.id,c('bs_js_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('ServicesCalendarSyncType')[va.calendar_sync_type])),ta(va),ua(va)],xa=sa.native_component_flow_request,ya;if(c('bs_js_primitive').is_nil_undef(xa)){ya=null;}else{var za=xa.page,ab=xa.page,bb=xa.page,cb;if(c('bs_js_primitive').is_nil_undef(bb)){cb=undefined;}else{var db=bb.profile_picture;cb=c('bs_js_primitive').is_nil_undef(db)?undefined:db.uri;}var eb=xa.suggested_time_range,fb=xa.product_item,gb=xa.product_item,hb=xa.product_item,ib;if(c('bs_js_primitive').is_nil_undef(hb)){ib=undefined;}else{var jb=hb.profile_picture;ib=c('bs_js_primitive').is_nil_undef(jb)?undefined:jb.uri;}var kb=xa.user,lb=xa.user,mb=xa.user,nb;if(c('bs_js_primitive').is_nil_undef(mb)){nb=undefined;}else{var ob=mb.profile_picture;nb=c('bs_js_primitive').is_nil_undef(ob)?undefined:ob.uri;}ya={availability:xa.availability,calendarSyncType:c('bs_js_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('ServicesCalendarSyncType')[xa.calendar_sync_type])),hasSavedToCalendar:xa.has_saved_to_calendar,generalInfo:xa.service_general_info,id:xa.id,pageID:c('bs_js_primitive').is_nil_undef(za)?undefined:za.id,pageName:c('bs_js_primitive').is_nil_undef(ab)?undefined:ab.name,pageProfilePic:cb,preferredTimeRange:c('bs_js_primitive').is_nil_undef(eb)?null:{end:eb.end,start:eb.start},price:c('bs_js_primitive').is_nil_undef(fb)?null:fb.experimental_freeform_price,requestedTime:xa.requested_time,serviceName:c('bs_js_primitive').is_nil_undef(gb)?null:gb.name,serviceProfilePic:ib,specialRequest:xa.special_request,status:xa.booking_status_value,statusLabel:xa.status,userID:c('bs_js_primitive').is_nil_undef(kb)?undefined:kb.id,username:c('bs_js_primitive').is_nil_undef(lb)?undefined:lb.short_name,userProfilePic:nb};}var pb=sa.message_bubble_type,qb;switch(pb){case "CANCELLED":qb=["Cancelled",h._("Cancelled")];break;case "DECLINED":qb=["Declined",h._("Declined")];break;case "REQUESTED":qb=["Requested",h._("Requested")];break;case "SCHEDULEED":qb=["Scheduled",h._("Scheduled")];break;default:throw [c('bs_caml_builtin_exceptions').invalid_argument,"Erroneous target status"];}return {id:sa.id,pageID:wa[0],calendarSyncType:wa[1],ctaID:wa[2],hasServiceConfig:wa[3],userID:sa.user.id,status:qb[0],statusLabel:qb[1],viewerID:c('CurrentUser').getAccountID(),requestMetadata:ya};}function ca(sa){return {live_location_id:sa.live_location_id,is_expired:c('bs_js_boolean').to_js_boolean(sa.is_expired),expiration_time:sa.expiration_time,sender:sa.sender,coordinate:sa.coordinate,location_title:sa.location_title,sender_destination:sa.sender_destination,stop_reason:sa.stop_reason};}function da(sa){var ta=sa.first_metaline;return {desc:sa.description,id:sa.id,image_aspect_ratio:sa.image_aspect_ratio,item_url:sa.target_url,metalines:c('bs_js_primitive').is_nil_undef(ta)?{}:{metaline_1:ta},name:sa.name,source:sa.source_name,text:sa.description,thumb_url:sa.image_url,title:sa.name,call_to_actions:i(sa.call_to_actions),media_blob_attachments:sa.media_blob_attachments};}function ea(sa){var ta=c('bs_array').map(da,sa.business_items.nodes),ua=i(sa.call_to_actions);return {message:sa.message,call_to_actions:ua,items:ta};}function fa(sa){return {message:sa.message,call_to_actions:i(sa.call_to_actions),items:c('bs_array').map(da,sa.promotion_items.nodes)};}function ga(sa){var ta=sa.partner_logo;return {account_holder_name:sa.account_holder_name,adjustments:c('bs_array').map(function(ua){return {adjustment_type:ua.adjustment_type,display_adjustment_amount:ua.adjustment_amount};},sa.adjustments),cancellation_url:sa.cancellation_url,items:c('bs_array').map(da,sa.items.nodes),merchant_name:sa.merchant_name,messenger_commerce_bubble_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MNCommerceBubbleType')[sa.messenger_commerce_bubble_type])),order_id:sa.order_id,order_time:sa.order_time,order_url:sa.order_url,payment_method:sa.payment_method,receipt_id:sa.receipt_id,recipient_name:sa.recipient_name,shipping_cost:sa.shipping_cost,shipping_method:sa.shipping_method,status:sa.status,structured_address:{city:sa.structured_address.city,state:sa.structured_address.state,country:sa.structured_address.country,postal_code:sa.structured_address.postal_code,street_1:c('bs_caml_array').caml_array_get(sa.structured_address.streets,0),street_2:c('bs_caml_array').caml_array_get(sa.structured_address.streets,1)},subtotal:sa.subtotal,total_cost:sa.total_cost,total_tax:sa.total_tax,partner_logo:c('bs_js_primitive').is_nil_undef(ta)?undefined:ta.uri};}function ha(sa){return {snippet:sa.snippet};}function ia(sa){return {snippet:sa.snippet};}function ja(sa,ta){return {payment_modules_client:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('PaymentModulesClient')[ta.payment_modules_client])),is_viewer_seller:ta.is_viewer_seller,payment_snippet:ta.payment_snippet,item_list:c('bs_array').map(function(ua){return {item_id:ua.item_id,name:ua.name,subtitle:ua.subtitle,description:ua.description,unit_price:ua.unit_price,image_urls:c('bs_array').map(function(va){return va.uri;},ua.images),quantity:ua.quantity};},ta.item_list),components:ta.components,payment_call_to_actions:ta.payment_call_to_actions,click_action:ta.click_action,actor_id:sa,invoicer_id:ta.invoicer_id};}var ka=function sa(ta){var ua={},va=[];for(var wa=ta.field_data_list,xa=Array.isArray(wa),ya=0,wa=xa?wa:wa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var za;if(xa){if(ya>=wa.length)break;za=wa[ya++];}else{ya=wa.next();if(ya.done)break;za=ya.value;}var ab=za,bb=ab.field_type,cb=ab.label,db=ab.values;if(bb===LeadGenInfoFieldTypes.CUSTOM){va.push({label:cb,values:db});}else ua[bb]={label:cb,values:db};}ua.questions=va;return ua;};function la(sa,ta){var ua=ta.invite_recipient,va=c('bs_js_primitive').is_nil_undef(ua)?null:ua.id,wa=ta.invite_sender,xa=c('bs_js_primitive').is_nil_undef(wa)?null:wa.id;return {quick_invite_id:ta.id,recipient_id:va,sender_id:xa,is_viewer_recipient:c('bs_js_boolean').to_js_boolean(+(sa===va))};}function ma(sa){var ta=function wa(xa){if(c('bs_js_primitive').is_nil_undef(xa)){return null;}else return xa.uri;},ua=sa.listing_category,va=c('bs_js_primitive').is_nil_undef(ua)?[null,null]:[ua.offer_image,ua.request_image];return {listingType:sa.listing_type,mapURI:ta(sa.map_image),offerURI:ta(va[0]),requestURI:ta(va[1])};}function na(sa){var ta=sa.receiver_profile,ua;if(c('bs_js_primitive').is_nil_undef(ta)){ua=null;}else{var va=ta.profile_picture;ua={id:ta.id,name:ta.short_name,full_name:ta.name,picture:c('bs_js_primitive').is_nil_undef(va)?null:va.uri,profile_url:ta.url};}var wa=sa.sender,xa;if(c('bs_js_primitive').is_nil_undef(wa)){xa={};}else{var ya=wa.profile_picture;xa={id:wa.id,name:wa.name,full_name:wa.full_name,picture:c('bs_js_primitive').is_nil_undef(ya)?null:ya.uri,profile_uri:wa.url};}var za=sa.transfer_context,ab;if(c('bs_js_primitive').is_nil_undef(za)){ab=[null,null,null];}else{var bb=za.transfer_theme;ab=[za.memoText,c('bs_array').map(function(eb){var fb=eb.image;if(c('bs_js_primitive').is_nil_undef(fb)){return null;}else return fb.uri;},za.memo_images),c('bs_js_primitive').is_nil_undef(bb)?null:bb.id];}var cb=sa.platform_item,db=c('bs_js_primitive').is_nil_undef(cb)?null:{name:cb.name,description:cb.description,image:c('bs_array').map(function(eb){var fb=eb.image;if(c('bs_js_primitive').is_nil_undef(fb)){return null;}else return fb.uri;},cb.photos),refURL:cb.url};return {sender:xa,amountWithSymbol:sa.transaction_amount.formatted_amount,status:c('bs_js_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('P2PTransferStatus')[sa.transfer_status])),receiver:ua,transfer_id:sa.transfer_id,completedTime:sa.completedTime,updatedTime:sa.updatedTime,creationTime:sa.creationTime,amount:sa.transaction_amount.amount,memoText:ab[0],memoPhotoURLs:ab[1],themeID:ab[2],discountAmount:sa.amount_fb_discount.formatted,fundsAvailability:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('FundsAvailability')[sa.funds_availability])),groupThreadFBID:sa.group_thread_fbid,platform_item:db,statusDescription:{markup:sa.status_description}};}function oa(sa){var ta=sa.requester,ua;if(c('bs_js_primitive').is_nil_undef(ta)){ua=undefined;}else{var va=ta.profile_picture;ua={id:ta.id,name:ta.short_name,full_name:ta.name,picture:c('bs_js_primitive').is_nil_undef(va)?null:va.uri,profile_url:ta.url};}var wa=sa.requestee,xa;if(c('bs_js_primitive').is_nil_undef(wa)){xa=undefined;}else{var ya=wa.profile_picture;xa={id:wa.id,name:wa.short_name,full_name:wa.name,picture:c('bs_js_primitive').is_nil_undef(ya)?null:ya.uri,profile_url:wa.url};}var za=c('bs_js_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('P2PPaymentRequestStatus')[sa.request_status])),ab=sa.transfer,bb=c('bs_js_primitive').is_nil_undef(ab)?[null,""]:[na(ab),ab.id],cb=sa.request_theme;return {amount:sa.transaction_amount.amount,amountWithSymbol:sa.amount.formatted,requestee:xa,requester:ua,currentStatus:za,currency:sa.amount.currency,creationTime:sa.creation_time,groupThreadFBID:sa.group_thread_fbid,id:sa.id,memoText:sa.memo_text,themeID:c('bs_js_primitive').is_nil_undef(cb)?null:cb.id,transfer:bb[0],transferID:bb[1],updatedTime:sa.updated_time,statusDescription:{markup:sa.status_description}};}function pa(sa){var ta=oa({amount:sa.amount,transaction_amount:sa.transaction_amount,requester:sa.requester,requestee:sa.requestee,request_status:sa.request_status,request_theme:sa.request_theme,id:sa.id,memo_text:sa.memo_text,transfer:sa.transfer,creation_time:sa.creation_time,group_thread_fbid:sa.group_thread_fbid,updated_time:sa.updated_time,status_description:sa.status_description}),ua={individualRequests:c('bs_array').map(oa,sa.individual_requests)};return Object.assign(ta,ua);}function qa(sa,ta){var ua=ta.media,va=c('bs_js_primitive').is_nil_undef(ua)?null:ua.animated_image,wa=c('bs_js_primitive').is_nil_undef(ua)?null:ua.image,xa={};c('bs_array').iter(function(mb){var nb=mb.value;xa[mb.key]=c('bs_js_primitive').is_nil_undef(nb)?null:nb.text;return 0;},ta.properties);var ya=ta.target,za;if(c('bs_js_primitive').is_nil_undef(ya)){za=null;}else switch(ya.tag|0){case 0:za=ma(ya[0]);break;case 1:za=na(ya[0]);break;case 2:za=pa(ya[0]);break;case 3:za=ja(sa,ya[0]);break;case 4:za=ia(ya[0]);break;case 5:za=ha(ya[0]);break;case 6:za=fa(ya[0]);break;case 7:za=ea(ya[0]);break;case 8:za={video_id:ya[0].video_id};break;case 9:za=ka(ya[0]);break;case 10:za=ca(ya[0]);break;case 11:za=la(sa,ya[0]);break;case 12:za=ba(ya[0]);break;case 13:var ab=ya[0],bb=ab.genie_sender,cb=c('bs_js_primitive').is_nil_undef(bb)?[null,null]:[bb.messaging_actor.id,bb.messaging_actor.name],db=cb[0],eb=ab.story_attachment,fb=c('bs_js_primitive').is_nil_undef(eb)?null:ra(sa,{legacy_attachment_id:db,story_attachment:{action_links:eb.action_links,messaging_attribution:eb.messaging_attribution,deduplication_key:eb.deduplication_key,description:eb.description,media:eb.media,properties:eb.properties,source:eb.source,style_list:eb.style_list,title_with_entities:eb.title_with_entities,url:eb.url,subattachments:[],target:null}});za={genie_id:db,genie_name:cb[1],attachment:fb};break;case 14:za=aa(ya[0]);break;case 15:za=w(ya[0]);break;case 16:var gb=ya[0];za={lwa_state:gb.lwa_state,lwa_type:gb.lwa_type};break;case 17:za=z(ya[0]);break;case 18:za=x(ya[0]);break;case 19:za=y(ya[0]);break;case 20:za=ga(ya[0]);break;case 21:za={id:ya[0].id};break;case 22:za=v(ya[0]);break;case 23:za=u(sa,ya[0]);break;case 24:za={is_active:ya[0].is_active};break;case 25:za=t(ya[0]);break;case 26:za=s(ya[0]);break;case 27:za=r(ya[0]);break;case 28:za=q(ya[0]);break;case 29:za=p(ya[0]);break;case 30:za=o(ya[0]);break;}var hb=ta.target,ib=!c('bs_js_primitive').is_nil_undef(hb)&&hb.tag===6?0:null,jb=ta.description,kb=ta.source,lb=ta.title_with_entities;return {description:c('bs_js_primitive').is_nil_undef(jb)?null:jb.text,media:{animated_image:c('bs_js_primitive').is_nil_undef(va)?null:va.uri,animated_image_size:c('bs_js_primitive').is_nil_undef(va)?{height:null,width:null}:{height:va.height,width:va.width},image:c('bs_js_primitive').is_nil_undef(wa)?null:wa.uri,image_size:c('bs_js_primitive').is_nil_undef(wa)?{height:null,width:null}:{height:wa.height,width:wa.width},duration:c('bs_js_primitive').is_nil_undef(ua)?null:ua.playable_duration,playable:c('bs_js_primitive').is_nil_undef(ua)?null:ua.is_playable,source:c('bs_js_primitive').is_nil_undef(ua)?null:ua.playable_url},source:c('bs_js_primitive').is_nil_undef(kb)?null:kb.text,style_list:ta.style_list,title:c('bs_js_primitive').is_nil_undef(lb)?null:lb.text,action_links:j(ta.action_links),messaging_attribution:ta.messaging_attribution,properties:xa,uri:ta.url,deduplication_key:ta.deduplication_key,target:za,label:ib};}function ra(sa,ta){var ua=ta.story_attachment,va;if(c('bs_js_primitive').is_nil_undef(ua)){va=null;}else{var wa={share_id:ta.legacy_attachment_id,subattachments:c('bs_array').map(function(ya){return qa(sa,ya);},ua.subattachments)},xa={description:ua.description,media:ua.media,source:ua.source,style_list:ua.style_list,title_with_entities:ua.title_with_entities,properties:ua.properties,url:ua.url,deduplication_key:ua.deduplication_key,action_links:ua.action_links,messaging_attribution:ua.messaging_attribution,target:ua.target};va=Object.assign(wa,qa(sa,xa));}return {app_attribution:null,attach_type:c('MercuryAttachmentType').SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:va,thumbnail_url:null};}g._getCallToActions=i;g._getActionLinks=j;g._getColor=k;g._getLogo=l;g._getCommerceLocation=n;g._getMessengerRetailShipmentTarget=o;g._getShipmentTrackingEventTarget=p;g._getAirlineItineraryMessageTarget=q;g._getAirlineUpdateMessageTarget=r;g._getAirlineCheckInReminderTarget=s;g._getAirlineBoardingPassCollectionTarget=t;g._getPageTarget=u;g._getGroupCommerceProductItemTarget=v;g._getExternalSongTarget=w;g._getAgentSuggestionItemTarget=x;g._getFundraiserTarget=y;g._getRetailItemTarget=z;g._getEventTarget=aa;g._getPagesPlatformBookingMessageTarget=ba;g._getMessageLiveLocationTarget=ca;g._getBusinessRetailItem=da;g._getMessengerBusinessMessageTarget=ea;g._getMessengerRetailPromotionTarget=fa;g._getMessengerRetailReceiptTarget=ga;g._getMomentsAppMessengerPhotoRequestTarget=ha;g._getMomentsAppMessengerInvitationTarget=ia;g._getPagesPlatformAttachmentTarget=ja;g._getPagesPlatformLeadGenInfoTarget=ka;g._getQuickInviteTarget=la;g._getCrisisListingTarget=ma;g._getP2PTransferTarget=na;g._getP2PTransferRequestTarget=oa;g._getP2PTransferRequestWithIndividualRequests=pa;g.transformStoryAttachment=qa;g.getExtensibleAttachmentPayload=ra;}),null);
__d('messengerAttachmentTransformerRe',['fbt','bs_array','bs_js_boolean','bs_pervasives','bs_js_primitive','MercuryAttachmentType','MercuryAttachmentContentType','messengerStoryAttachmentTransformerRe'],(function a(b,c,d,e,f,g,h){'use strict';function i(q){if(q.is_malicious){return {app_attribution:null,icon_type:c('MercuryAttachmentContentType').UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:c('MercuryAttachmentType').ERROR,error_msg:h._("This attachment has been marked as malicious."),url_shimhash:null,url_skipshim:null};}else{var r=q.attribution_app,s;if(c('bs_js_primitive').is_nil_undef(r)){s=null;}else{var t=r.square_logo;s={id:r.id,icon_url:c('bs_js_primitive').is_nil_undef(t)?null:t.uri,metadata:q.attribution_metadata,name:r.name};}var u=q.url;return {app_attribution:s,icon_type:q.content_type,metadata:null,name:q.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:c('bs_js_primitive').is_nil_undef(u)?null:u,attach_type:c('MercuryAttachmentType').FILE,error_msg:undefined,url_shimhash:q.url_shimhash,url_skipshim:q.url_skipshim};}}function j(q,r,s){var t=q.chat_image,u=c('bs_js_primitive').is_nil_undef(t)?[null,null,null]:[t.uri,t.width,t.height],v=u[0],w=q.chat_image,x=c('bs_js_primitive').is_nil_undef(w)?null:{width:w.width,height:w.height},y=q.large_image,z=c('bs_js_primitive').is_nil_undef(y)?[null,null]:[y.uri,{width:y.width,height:y.height}],aa=q.inbox_image,ba=c('bs_js_primitive').is_nil_undef(aa)?[null,null]:[aa.uri,{width:aa.width,height:aa.height}],ca=q.attribution_app,da;if(c('bs_js_primitive').is_nil_undef(ca)){da=null;}else{var ea=ca.square_logo;da={id:ca.id,icon_url:c('bs_js_primitive').is_nil_undef(ea)?null:ea.uri,metadata:q.attribution_metadata,name:ca.name};}return {app_attribution:da,attach_type:c('MercuryAttachmentType').VIDEO,name:q.filename,url:q.playable_url,rel:"async",preview_url:v,preview_width:u[1],preview_height:u[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c('MercuryAttachmentContentType').VIDEO,metadata:{fbid:q.legacy_attachment_id,render_as_sticker:c('bs_js_boolean').to_js_boolean(+(q.video_type==="SPEAKING_STICKER")),dimensions:{width:q.original_dimensions.x,height:q.original_dimensions.y},duration:q.playable_duration_in_ms,large_size:z[1],large_preview:z[0],chat_size:x,chat_preview:v,inbox_size:ba[1],inbox_preview:ba[0],pageid:s?r:undefined},thumbnail_url:v,share:null};}function k(q){var r=q.attribution_app,s;if(c('bs_js_primitive').is_nil_undef(r)){s=null;}else{var t=r.square_logo;s={id:r.id,icon_url:c('bs_js_primitive').is_nil_undef(t)?null:t.uri,metadata:q.attribution_metadata,name:r.name};}return {app_attribution:s,attach_type:c('MercuryAttachmentType').FILE,name:q.filename,url:q.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c('MercuryAttachmentContentType').MUSIC,metadata:{duration:q.playable_duration_in_ms,isVoicemail:q.is_voicemail?"1":"0",type:q.audio_type==="VOICE_MESSAGE"?"fb_voice_message":q.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:q.url_shimhash,url_skipshim:q.url_skipshim};}function l(q,r,s){var t=q.preview_image,u=c('bs_js_primitive').is_nil_undef(t)?[null,null,null]:[t.uri,t.width,t.height],v=q.animated_image,w=c('bs_js_primitive').is_nil_undef(v)?null:v.uri,x=q.attribution_app,y;if(c('bs_js_primitive').is_nil_undef(x)){y=null;}else{var z=x.square_logo;y={id:x.id,icon_url:c('bs_js_primitive').is_nil_undef(z)?null:z.uri,metadata:q.attribution_metadata,name:x.name};}return {app_attribution:y,attach_type:c('MercuryAttachmentType').ANIMATED_IMAGE,name:q.filename,url:w,rel:"async",preview_url:u[0],preview_width:u[1],preview_height:u[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c('MercuryAttachmentContentType').PHOTO,metadata:{fbid:q.legacy_attachment_id,image:w,dimensions:c('bs_pervasives').string_of_int(q.original_dimensions.x)+(","+c('bs_pervasives').string_of_int(q.original_dimensions.y)),pageid:s?r:undefined},thumbnail_url:w,share:null};}function m(q){var r=q.original_extension==="gif"?c('MercuryAttachmentType').ANIMATED_IMAGE:q.render_as_sticker?c('MercuryAttachmentType').THIRDPARTYSTICKER:c('MercuryAttachmentType').PHOTO,s=q.preview,t=c('bs_js_primitive').is_nil_undef(s)?[null,null,null]:[s.uri,s.width,s.height],u;if(r===c('MercuryAttachmentType').PHOTO){var v=q.large_preview;u=c('bs_js_primitive').is_nil_undef(v)?[null,null,null]:[v.uri,v.width,v.height];}else u=[null,null,null];var w=q.attribution_app,x;if(c('bs_js_primitive').is_nil_undef(w)){x=null;}else{var y=w.square_logo;x={id:w.id,icon_url:c('bs_js_primitive').is_nil_undef(y)?null:y.uri,metadata:q.attribution_metadata,name:w.name};}var z=q.thumbnail;return {app_attribution:x,attach_type:r,name:q.filename,url:null,rel:"async",preview_url:t[0],preview_width:t[1],preview_height:t[2],large_preview_url:u[0],large_preview_width:u[1],large_preview_height:u[2],icon_type:c('MercuryAttachmentContentType').PHOTO,metadata:{fbid:q.legacy_attachment_id,dimensions:c('bs_pervasives').string_of_int(q.original_dimensions.x)+(","+c('bs_pervasives').string_of_int(q.original_dimensions.y))},thumbnail_url:c('bs_js_primitive').is_nil_undef(z)?null:z.uri,share:null};}function n(q,r){var s=r,t=q;if(q>=r){var u=c('bs_pervasives').min(120,t/2),v=u/(t/2);return [u|0,s/2*v|0];}else{var w=c('bs_pervasives').min(120,s/2),x=w/(s/2);return [t/2*x|0,w|0];}}function o(q){var r=n(q.width,q.height),s=q.pack,t=q.sprite_image,u=q.sprite_image_2x,v=q.padded_sprite_image,w=q.padded_sprite_image_2x;return {app_attribution:null,attach_type:c('MercuryAttachmentType').STICKER,name:null,url:q.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c('MercuryAttachmentContentType').UNKNOWN,metadata:{accessibilityLabel:q.label,stickerID:q.id,packID:c('bs_js_primitive').is_nil_undef(s)?null:s.id,frameCount:q.frame_count,frameRate:q.frame_rate,framesPerRow:q.frame_count>1?q.frames_per_row:1,framesPerCol:q.frame_count>1?q.frames_per_column:1,height:r[1],width:r[0],spriteURI:c('bs_js_primitive').is_nil_undef(t)?null:t.uri,spriteURI2x:c('bs_js_primitive').is_nil_undef(u)?null:u.uri,paddedSpriteURI:c('bs_js_primitive').is_nil_undef(v)?null:v.uri,paddedSpriteURI2x:c('bs_js_primitive').is_nil_undef(w)?null:w.uri,thumbnail_url:null,share:null}};}function p(q,r,s){var t=[],u=r.extensible_attachment;if(!c('bs_js_primitive').is_nil_undef(u))t.push(c('messengerStoryAttachmentTransformerRe').getExtensibleAttachmentPayload(q,u));var v=r.sticker;if(!c('bs_js_primitive').is_nil_undef(v))t.push(o(v));var w=r.blob_attachments;if(!c('bs_js_primitive').is_nil_undef(w))c('bs_array').iter(function(x){switch(x.tag|0){case 0:t.push(m(x[0]));return 0;case 1:t.push(l(x[0],q,s));return 0;case 2:t.push(k(x[0]));return 0;case 3:t.push(j(x[0],q,s));return 0;case 4:t.push(i(x[0]));return 0;}},w);return t;}g._getFilePayload=i;g._getVideoPayload=j;g._getAudioPayload=k;g._getAnimatedImagePayload=l;g._getImagePayload=m;g._getStickerDimensions=n;g._getStickerPayload=o;g.transformAttachment=p;}),null);
__d("MessengerThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1510859938973337";};j.getQueryID=function(){"use strict";return "1385351098208356";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("XGraphQLBatchAPIController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/api\/graphqlbatch\/",{queries:{type:"String"},batch_name:{type:"String"},scheduler:{type:"Enum",enumType:1}});}),null);
__d('WebGraphQL',['ActorURI','Deferred','XGraphQLBatchAPIController','XHRRequest','createChunkedResponseParser','getAsyncParams','getSameOriginTransport'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getURIBuilder().getURI(),k={exec:function l(m,n){return k.execAll([m],n)[0];},execAll:function l(m,n){var o={},p={},q=m.map(function(s,t){var u='o'+t;o[u]={doc_id:s.__getDocID(),query_params:s.__getVariables()};return p[u]=new (c('Deferred'))();}),r=babelHelpers['extends']({},c('getAsyncParams')('POST'));if(n&&n.actorID!=null)r[c('ActorURI').PARAMETER_ACTOR]=n.actorID;new (c('XHRRequest'))(j).setMethod('POST').setTransportBuilder(c('getSameOriginTransport')).setRequestHeader('Content-Type','application/x-www-form-urlencoded').setData(babelHelpers['extends']({},r,{queries:JSON.stringify(o)})).setResponseHandler(c('createChunkedResponseParser')(function(s,t,u){var v=JSON.parse(s);Object.keys(v).forEach(function(w){var x=p[w];if(x){var y=v[w];if(y.errors){x.reject(y);}else if(y.data){x.resolve(y.data);}else x.reject({data:{},errors:[{message:'Unexpected response received from server.',severity:'CRITICAL',response:y}]});}});if(u)Object.keys(p).forEach(function(w){if(!p[w].isSettled())p[w].reject({data:{},errors:[{message:'No response received from server.',severity:'CRITICAL'}]});});})).send();return q;},__forController:h};return k;}f.exports=h(c('XGraphQLBatchAPIController'));}),null);
__d('messengerMessageTransformerRe',['FBID','bs_array','bs_block','bs_string','getByPath','bs_js_boolean','MercuryIDs','bs_pervasives','bs_caml_format','CurrentUser','bs_js_primitive','MessagingTag','bs_js_null_undefined','MercuryActionType','MessagingTagUtils','MessagingSourceEnum','StoryAttachmentStyle','MNCommerceMessageType','MercuryLogMessageType','MessagingGenericAdminTextType','InstantGameUpdateXMATUpdateType','messengerAttachmentTransformerRe'],(function a(b,c,d,e,f,g){'use strict';function h(o,p,q){var r;if(o.__typename==="GroupPollExtensibleMessageAdminText"){var s=Object.assign({},o.question);Object.assign(s,{total_count:o.total_count,options:c('bs_array').map(function(t){var u=Object.assign({},t);return Object.assign(u,{total_count:t.voters.nodes.length,voters:c('bs_array').map(function(v){return v.id;},t.voters.nodes)});},o.question.options.nodes)});r={message_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MessagingGenericAdminTextType')[p])),untypedData:{event_type:c('bs_string').lowercase(o.event_type),question_id:o.question.id,question_json:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(JSON.stringify(s)))}};}else r=o.__typename==="InstantGameUpdateExtensibleMessageAdminText"?{message_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MessagingGenericAdminTextType')[p])),untypedData:{game_id:c('getByPath')(o,["game","id"]),update_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('InstantGameUpdateXMATUpdateType')[o.update_type])),collapsed_text:o.collapsed_text,expanded_text:o.expanded_text,cta_url:c('getByPath')(o,["instant_game_update_data","cta_url"]),cta_title:c('getByPath')(o,["instant_game_update_data","cta_title"]),custom_image_url:c('getByPath')(o,["instant_game_update_data","photo","image","uri"])}}:o.__typename==="ThemeColorExtensibleMessageAdminText"||o.__typename==="ThreadIconExtensibleMessageAdminText"||o.__typename==="ThreadNicknameExtensibleMessageAdminText"||o.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||o.__typename==="AddContactExtensibleMessageAdminText"||o.__typename==="RtcCallLogExtensibleMessageAdminText"||o.__typename==="GameScoreExtensibleMessageAdminText"||o.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||o.__typename==="PartiesInviteExtensibleMessageAdminText"?{message_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MessagingGenericAdminTextType')[p])),untypedData:Object.assign({},o)}:{message_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MessagingGenericAdminTextType')[p])),untypedData:undefined};return {log_message_body:q,log_message_data:r,log_message_type:c('MercuryLogMessageType').GENERIC_ADMIN_TEXT};}function i(o){return c('bs_array').map(function(p){if(p==="p2p_transfer"){return c('StoryAttachmentStyle').ORION;}else if(p==="p2p_payment_request"){return c('StoryAttachmentStyle').ORION_REQUEST;}else return p;},o);}function j(o){var p=o.target,q;if(c('bs_js_primitive').is_nil_undef(p)){q=null;}else if(p.__typename==="CrisisListing"){q=c('bs_block').__(0,[{listing_type:p.listing_type,listing_category:p.listing_category,map_image:p.map_image}]);}else if(p.__typename==="PeerToPeerTransfer"){q=c('bs_block').__(1,[{sender:p.sender,receiver_profile:p.receiver_profile,transaction_amount:p.transaction_amount,transfer_status:p.transfer_status,transfer_id:p.transfer_id,completedTime:p.completedTime,updatedTime:p.updatedTime,creationTime:p.creationTime,transfer_context:p.transfer_context,amount_fb_discount:p.amount_fb_discount,funds_availability:p.funds_availability,group_thread_fbid:p.group_thread_fbid,platform_item:p.platform_item,id:p.id,status_description:p.status_description}]);}else if(p.__typename==="PeerToPeerPaymentRequest"){q=c('bs_block').__(2,[{amount:p.amount,transaction_amount:p.transaction_amount,requester:p.requester,requestee:p.requestee,request_status:p.request_status,request_theme:p.request_theme,id:p.id,memo_text:p.memo_text,transfer:p.transfer,creation_time:p.creation_time,group_thread_fbid:p.group_thread_fbid,updated_time:p.updated_time,status_description:p.status_description,individual_requests:p.individual_requests}]);}else if(p.__typename==="PaymentPlatformAttachment"){q=c('bs_block').__(3,[{payment_modules_client:p.payment_modules_client,is_viewer_seller:p.is_viewer_seller,payment_snippet:p.payment_snippet,item_list:p.item_list,components:p.components,payment_call_to_actions:p.payment_call_to_actions,click_action:p.click_action,invoicer_id:p.invoicer_id}]);}else if(p.__typename==="MomentsAppMessengerInvitation"){q=c('bs_block').__(4,[{snippet:p.snippet}]);}else if(p.__typename==="MomentsAppMessengerPhotoRequest"){q=c('bs_block').__(5,[{snippet:p.snippet}]);}else if(p.__typename==="MessengerRetailPromotion"){q=c('bs_block').__(6,[{message:p.message,call_to_actions:p.call_to_actions,promotion_items:p.promotion_items}]);}else if(p.__typename==="MessengerBusinessMessage"){q=c('bs_block').__(7,[{message:p.message,call_to_actions:p.call_to_actions,business_items:p.business_items}]);}else if(p.__typename==="Video"){q=c('bs_block').__(8,[{video_id:p.video_id}]);}else if(p.__typename==="PagesPlatformLeadGenInfo"){q=c('bs_block').__(9,[{field_data_list:p.field_data_list}]);}else if(p.__typename==="MessageLiveLocation"){q=c('bs_block').__(10,[{live_location_id:p.live_location_id,is_expired:p.is_expired,expiration_time:p.expiration_time,sender:p.sender,coordinate:p.coordinate,location_title:p.location_title,sender_destination:p.sender_destination,stop_reason:p.stop_reason}]);}else if(p.__typename==="QuickInvite"){q=c('bs_block').__(11,[{id:p.id,invite_sender:p.invite_sender,invite_recipient:p.invite_recipient}]);}else if(p.__typename==="PagesPlatformBookingMessage"){q=c('bs_block').__(12,[{id:p.id,page:p.page,message_bubble_type:p.message_bubble_type,user:p.user,native_component_flow_request:p.native_component_flow_request}]);}else if(p.__typename==="GenieMessage"){q=c('bs_block').__(13,[{genie_sender:p.genie_sender,story_attachment:p.story_attachment}]);}else if(p.__typename==="Event"){q=c('bs_block').__(14,[{eventID:p.eventID,guestStatus:p.guestStatus,canViewerJoin:p.canViewerJoin,timeString:p.timeString,event_place:p.event_place,social_context:p.social_context,watchStatus:p.watchStatus,connection_style:p.connection_style,canViewerWatch:p.canViewerWatch}]);}else if(p.__typename==="ExternalSong"){q=c('bs_block').__(15,[{application_name:p.application_name,artist_names:p.artist_names,audio_url:p.audio_url,duration_ms:p.duration_ms,music_title:p.music_title}]);}else if(p.__typename==="LightweightAction"){q=c('bs_block').__(16,[{lwa_state:p.lwa_state,lwa_type:p.lwa_type}]);}else if(p.__typename==="MessengerRetailItem"){q=c('bs_block').__(17,[{id:p.id,name:p.name,desc:p.desc,thumb_url:p.thumb_url,item_url:p.item_url,source:p.source,image_aspect_ratio:p.image_aspect_ratio,first_metaline:p.first_metaline,second_metaline:p.second_metaline,third_metaline:p.third_metaline,call_to_actions:p.call_to_actions}]);}else if(p.__typename==="AgentItemSuggestion"){q=c('bs_block').__(18,[{id:p.id,desc:p.desc,total_cost:p.total_cost,merchant_name:p.merchant_name,target_url:p.target_url,thumb_url:p.thumb_url,raw_amount:p.raw_amount,payment:p.payment,price_amount:p.price_amount,price_currency:p.price_currency,name:p.name}]);}else if(p.__typename==="FundraiserPersonToCharity"||p.__typename==="FundraiserPersonForPerson"){var r=p.fundraiser_detailed_progress_text,s=p.fundraiser_subtitle_text,t=p.focused_cover_photo;q=c('bs_block').__(19,[{id:p.id,canDonate:p.can_donate,hasViewerDonated:p.has_viewer_donated,fundraiserDetailedProgressText:c('bs_js_primitive').is_nil_undef(r)?null:r.text,fundraiserSubtitleText:c('bs_js_primitive').is_nil_undef(s)?null:s.text,focusedCoverPhoto:c('bs_js_primitive').is_nil_undef(t)?null:{src:t.photo.image.uri,data:{height:t.photo.image.height,width:t.photo.image.width}}}]);}else q=p.__typename==="MessengerRetailReceipt"?c('bs_block').__(20,[{account_holder_name:p.account_holder_name,adjustments:p.retail_adjustments,cancellation_url:p.cancellation_url,items:p.retail_items,merchant_name:p.merchant_name,messenger_commerce_bubble_type:p.bubble_type,order_id:p.receipt_id,order_time:p.order_time_for_display,order_url:p.receipt_url,payment_method:p.order_payment_method,receipt_id:p.id,recipient_name:p.recipient_name,shipping_cost:p.shipping_cost,shipping_method:p.shipping_method,status:p.status,structured_address:p.structured_address,subtotal:p.subtotal,total_cost:p.total,total_tax:p.tax,partner_logo:p.partner_log}]):p.__typename==="JobApplication"?c('bs_block').__(21,[{id:p.id}]):p.__typename==="GroupCommerceProductItem"?c('bs_block').__(22,[{group_commerce_item_description:p.group_commerce_item_description,group_commerce_item_seller:p.group_commerce_item_seller,formatted_price:p.formatted_price,group_commerce_item_title:p.group_commerce_item_title,primary_photo:p.primary_photo,url:p.url}]):p.__typename==="Page"?c('bs_block').__(23,[{address:p.address,top_category_name:p.top_category_name,cover_photo:p.cover_photo,location:p.location,name:p.name,overall_star_rating:p.overall_star_rating,id:p.id,price_range_description:p.price_range_description}]):p.__typename==="MessengerEventReminder"?c('bs_block').__(24,[{is_active:p.is_active}]):p.__typename==="AirlineBoardingPassCollectionMessageAttachment"?c('bs_block').__(25,[{tint_color:p.tint_color,logo:p.logo,flight_label:p.flight_label,boarding_time_label:p.boarding_time_label,departure_label:p.departure_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,flight_terminal_label:p.flight_terminal_label,flight_gate_label:p.flight_gate_label,view_boarding_pass_cta_label:p.view_boarding_pass_cta_label,boarding_passes:p.boarding_passes,share_cta_label:p.share_cta_label,message_cta_label:p.message_cta_label,boarding_pass_title_label:p.boarding_pass_title_label,boarding_pass_error_title_label:p.boarding_pass_error_title_label}]):p.__typename==="AirlineCheckInReminderMessageAttachment"?c('bs_block').__(26,[{pnr_number:p.pnr_number,tint_color:p.tint_color,checkin_url:p.checkin_url,booking_number_label:p.booking_number_label,flight_label:p.flight_label,arrival_time_label:p.arrival_time_label,departure_time_label:p.departure_time_label,checkin_cta_label:p.checkin_cta_label,logo:p.logo,flight_infos:p.flight_infos}]):p.__typename==="AirlineUpdateMessageAttachment"?c('bs_block').__(27,[{pnr_number:p.pnr_number,tint_color:p.tint_color,update_type:p.update_type,departure_time_label:p.departure_time_label,arrival_time_label:p.arrival_time_label,booking_number_label:p.booking_number_label,flight_gate_label:p.flight_gate_label,flight_label:p.flight_label,flight_status_label:p.flight_status_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,logo:p.logo,flight_info:p.flight_info,hightlighted_labels:p.hightlighted_labels}]):p.__typename==="AirlineItineraryMessageAttachment"?c('bs_block').__(28,[{confirmation_number:p.confirmation_number,pnr_number:p.pnr_number,tint_color:p.tint_color,formatted_total:p.formatted_total,itemized_price_infos:p.itemized_price_infos,formatted_tax:p.formatted_tax,formatted_base_price:p.formatted_base_price,passenger_infos:p.passenger_infos,logo:p.logo,aircraft_type_label:p.aircraft_type_label,arrival_time_label:p.arrival_time_label,base_price_label:p.base_price_label,booking_number_label:p.booking_number_label,cabin_type_label:p.cabin_type_label,departure_time_label:p.departure_time_label,flight_confirmation_label:p.flight_confirmation_label,flight_date_label:p.flight_date_label,flight_label:p.flight_label,flight_terminal_label:p.flight_terminal_label,itinerary_error_title_label:p.itinerary_error_title_label,itinerary_title_label:p.itinerary_title_label,passenger_name_label:p.passenger_name_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,purchase_summary_label:p.purchase_summary_label,taxes_label:p.taxes_label,total_label:p.total_label,view_details_cta_label:p.view_details_cta_label,itinerary_legs:p.itinerary_legs}]):p.__typename==="MessengerRetailShipmentTrackingEvent"?c('bs_block').__(29,[{id:p.id,shipment:p.shipment,tracking_event_time_for_display:p.tracking_event_time_for_display,shipment_tracking_event_type:p.shipment_tracking_event_type,messenger_commerce_location:p.messenger_commerce_location,tracking_event_description:p.tracking_event_description,bubble_type:p.bubble_type}]):p.__typename==="MessengerRetailShipment"?c('bs_block').__(30,[{id:p.id,tracking_number:p.tracking_number,shipdate_for_display:p.shipdate_for_display,estimated_delivery_time_for_display:p.estimated_delivery_time_for_display,commerce_origin:p.commerce_origin,commerce_destination:p.commerce_destination,retail_carrier:p.retail_carrier,shipment_tracking_events:p.shipment_tracking_events,receipt:p.receipt,recipient:p.recipient,retail_shipment_items:p.retail_shipment_items,bubble_type:p.bubble_type}]):null;return {description:o.description,media:o.media,source:o.source,style_list:i(o.style_list),title_with_entities:o.title_with_entities,properties:o.properties,url:o.url,deduplication_key:o.deduplication_key,action_links:o.action_links,messaging_attribution:o.messaging_attribution,target:q};}function k(o){var p=j({description:o.description,media:o.media,source:o.source,style_list:o.style_list,title_with_entities:o.title_with_entities,properties:o.properties,url:o.url,deduplication_key:o.deduplication_key,action_links:o.action_links,messaging_attribution:o.messaging_attribution,target:o.target});if(c('bs_js_primitive').is_nil_undef(p)){return null;}else{var q=c('bs_array').map(j,o.subattachments);return Object.assign({subattachments:q},p);}}function l(o){var p=o.blob_attachments,q=[];if(!c('bs_js_primitive').is_nil_undef(p))c('bs_array').iter(function(r){if(r.__typename==="MessageImage"){q.push(c('bs_block').__(0,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,preview:r.preview,large_preview:r.large_preview,thumbnail:r.thumbnail,legacy_attachment_id:r.legacy_attachment_id,original_dimensions:r.original_dimensions,original_extension:r.original_extension,render_as_sticker:r.render_as_sticker}]));return 0;}else if(r.__typename==="MessageAnimatedImage"){q.push(c('bs_block').__(1,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,animated_image:r.animated_image,legacy_attachment_id:r.legacy_attachment_id,preview_image:r.preview_image,original_dimensions:r.original_dimensions}]));return 0;}else if(r.__typename==="MessageAudio"){q.push(c('bs_block').__(2,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,playable_url:r.playable_url,playable_duration_in_ms:r.playable_duration_in_ms,is_voicemail:r.is_voicemail,audio_type:r.audio_type,url_shimhash:r.url_shimhash,url_skipshim:r.url_skipshim}]));return 0;}else if(r.__typename==="MessageVideo"){q.push(c('bs_block').__(3,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,playable_url:r.playable_url,playable_duration_in_ms:r.playable_duration_in_ms,legacy_attachment_id:r.legacy_attachment_id,chat_image:r.chat_image,video_type:r.video_type,original_dimensions:r.original_dimensions,large_image:r.large_image,inbox_image:r.inbox_image}]));return 0;}else if(r.__typename==="MessageFile"){q.push(c('bs_block').__(4,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,url:r.url,content_type:r.content_type,is_malicious:r.is_malicious,url_shimhash:r.url_shimhash,url_skipshim:r.url_skipshim}]));return 0;}else return 0;},p);return q;}function m(o){var p=o.message;if(c('bs_js_primitive').is_nil_undef(p)){return [];}else{var q=[];c('bs_array').iter(function(r){var s=r.entity;if(c('bs_js_primitive').is_nil_undef(s)){return 0;}else{var t=s.id;if(c('bs_js_primitive').is_nil_undef(t)){return 0;}else{q.push({id:t,offset:r.offset,length:r.length});return 0;}}},p.ranges);return q;}}function n(o,p,q,r){var s={};c('bs_array').iter(function(qa){s[qa.user.id]=qa.reaction;return 0;},p.message_reactions);var t=+c('FBID').isUser(p.message_sender.id),u=t?c('MessagingTagUtils').getSourceFromTags(p.tags_list):c('MessagingSourceEnum').UNKNOWN,v=t?c('MessagingTagUtils').getSourceTags(p.tags_list,u):[],w=p.commerce_message_type,x=p.customizations,y={thread_id:q.thread_id,thread_fbid:q.thread_fbid,other_user_fbid:q.other_user_fbid,action_type:p.__typename==="UserMessage"?c('MercuryActionType').USER_GENERATED_MESSAGE:c('MercuryActionType').LOG_MESSAGE,message_id:p.message_id,threading_id:null,offline_threading_id:p.offline_threading_id,author:c('MercuryIDs').getParticipantIDFromUserID(p.message_sender.id),author_email:p.message_sender.email,ephemeral_ttl_mode:p.ttl,timestamp:c('bs_caml_format').caml_float_of_string(p.timestamp_precise),is_unread:p.unread,is_filtered_content:c('bs_js_boolean').to_js_boolean(+(p.tags_list.indexOf(c('MessagingTag').FILTERED_CONTENT)!==-1)),is_filtered_content_bh:c('bs_js_boolean').to_js_boolean(+(p.tags_list.indexOf(c('MessagingTag').FILTERED_CONTENT_BH)!==-1)),is_filtered_content_account:c('bs_js_boolean').to_js_boolean(+(p.tags_list.indexOf(c('MessagingTag').FILTERED_CONTENT_ACCOUNT)!==-1)),is_filtered_content_quasar:c('bs_js_boolean').to_js_boolean(+(p.tags_list.indexOf(c('MessagingTag').FILTERED_CONTENT_QUASAR)!==-1)),is_filtered_content_invalid_app:c('bs_js_boolean').to_js_boolean(+(p.tags_list.indexOf(c('MessagingTag').FILTERED_CONTENT_INVALID_APP)!==-1)),is_sponsored:p.is_sponsored,commerce_message_type:c('bs_js_primitive').is_nil_undef(w)?null:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MNCommerceMessageType')[w])),customizations:c('bs_js_primitive').is_nil_undef(x)?[]:x,source:u,source_tags:v,tags:p.tags_list,is_spoof_warning:c('bs_js_boolean').to_js_boolean(+(p.tags_list.indexOf(c('MessagingTag').DOMAIN_AUTH_FAIL)!==-1||p.tags_list.indexOf(c('MessagingTag').SPAM_SPOOFING)!==-1||p.tags_list.indexOf(c('MessagingTag').SPOOF_WARNING)!==-1)),folder:q.folder,platform_xmd:p.platform_xmd_encoded,message_source:p.message_source_data,montage_reply_data:p.montage_reply_data,skip_bump_thread:false,profile_ranges:m(p),reactions:s};if(p.__typename==="UserMessage"){var z=l(p),aa=p.extensible_attachment,ba;if(c('bs_js_primitive').is_nil_undef(aa)){ba=null;}else{var ca=aa.story_attachment;ba={legacy_attachment_id:aa.legacy_attachment_id,story_attachment:c('bs_js_primitive').is_nil_undef(ca)?null:k(ca)};}var da=c('messengerAttachmentTransformerRe').transformAttachment(o,{extensible_attachment:ba,blob_attachments:z,sticker:p.sticker},r),ea=p.message;Object.assign(y,{body:c('bs_js_primitive').is_nil_undef(ea)?null:ea.text,subject:null,has_attachment:c('bs_js_boolean').to_js_boolean(+(da.length>0)),attachments:da,raw_attachments:null,ranges:undefined,meta_ranges:p.meta_ranges.map(function(qa){return babelHelpers['extends']({},qa,{data:JSON.parse(qa.data)});})});}else if(p.__typename==="VoiceCallMessage"){var fa=p.message_sender.id,ga=q.other_user_fbid,ha=c('bs_js_primitive').is_nil_undef(ga)?null:c('MercuryIDs').getParticipantIDFromUserID(fa===ga?c('CurrentUser').getID():ga),ia=p.answered;Object.assign(y,{log_message_type:c('MercuryLogMessageType').PHONE_CALL,log_message_data:{answered:c('bs_js_primitive').is_nil_undef(ia)?false:ia,caller:c('MercuryIDs').getParticipantIDFromUserID(fa),callee:ha},log_message_body:p.snippet});}else if(p.__typename==="ThreadNameMessage"){Object.assign(y,{log_message_type:c('MercuryLogMessageType').THREAD_NAME,log_message_data:{name:p.thread_name},log_message_body:p.snippet});}else if(p.__typename==="ThreadImageMessage"){var ja=p.image_with_metadata,ka;if(c('bs_js_primitive').is_nil_undef(ja)){ka=null;}else{var la=ja.preview;ka={preview_url:c('bs_js_primitive').is_nil_undef(la)?null:la.uri,metadata:{fbid:ja.legacy_attachment_id,dimensions:c('bs_pervasives').string_of_int(ja.original_dimensions.x)+(","+c('bs_pervasives').string_of_int(ja.original_dimensions.y))}};}Object.assign(y,{log_message_type:c('MercuryLogMessageType').THREAD_IMAGE,log_message_data:{image:ka},log_message_body:p.snippet});}else if(p.__typename==="ParticipantsAddedMessage"){var ma=p.participants_added;Object.assign(y,{log_message_type:c('MercuryLogMessageType').SUBSCRIBE,log_message_data:{added_participants:c('bs_js_primitive').is_nil_undef(ma)?[]:c('bs_array').map(function(qa){return c('MercuryIDs').getParticipantIDFromUserID(qa.id);},ma)},log_message_body:p.snippet});}else if(p.__typename==="ParticipantLeftMessage"){var na=p.participants_removed;Object.assign(y,{log_message_type:c('MercuryLogMessageType').UNSUBSCRIBE,log_message_data:{removed_participants:c('bs_js_primitive').is_nil_undef(na)?[]:c('bs_array').map(function(qa){return c('MercuryIDs').getParticipantIDFromUserID(qa.id);},na)},log_message_body:p.snippet});}else if(p.__typename==="GenericAdminTextMessage"){var oa=p.extensible_message_admin_text,pa=p.extensible_message_admin_text_type;if(c('bs_js_primitive').is_nil_undef(oa)){if(!c('bs_js_primitive').is_nil_undef(pa))Object.assign(y,{log_message_body:p.snippet,log_message_data:{message_type:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MessagingGenericAdminTextType')[pa])),untypedData:undefined},log_message_type:c('MercuryLogMessageType').GENERIC_ADMIN_TEXT});}else if(!c('bs_js_primitive').is_nil_undef(pa))Object.assign(y,h(oa,pa,p.snippet));}return y;}g._getGenericAdminTextMessage=h;g._getStyleList=i;g.unsafeCastExtensibleAttachmentWithoutSubattachments=j;g.unsafeCastExtensibleAttachment=k;g.unsafeCastBlobAttachments=l;g._getProfileRanges=m;g.transformMessage=n;}),null);
__d('messengerReadReceiptTransformerRe',['bs_array','bs_caml_format','bs_js_primitive'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={};c('bs_array').iter(function(l){var m=l.actor;if(!c('bs_js_primitive').is_nil_undef(m)&&i!==m.id){k[m.id]={action:c('bs_caml_format').caml_float_of_string(l.action),watermark:c('bs_caml_format').caml_float_of_string(l.watermark)};return 0;}else return 0;},j.nodes);return k;}g.transformReadReceipt=h;}),null);
__d('messengerThreadTransformerRe',['URI','bs_array','bs_string','bs_caml_array','bs_js_boolean','MercuryIDs','bs_caml_format','bs_js_primitive','bs_js_null_undefined','MessagingThreadType','messengerAttachmentTransformerRe','MessengerThreadCannotReplyReason'],(function a(b,c,d,e,f,g){'use strict';function h(s){var t=s.location_coordinates,u=c('bs_js_primitive').is_nil_undef(t)?[null,null]:[t.latitude,t.longitude],v=s.location_page,w;if(c('bs_js_primitive').is_nil_undef(v)){w=null;}else{var x=v.address;w=c('bs_js_primitive').is_nil_undef(x)?null:x.full_address;}var y=s.allows_rsvp,z=y!==0?1:0,aa=c('bs_array').fold_left(function(ca,da){ca[da.node.id]=da.guest_list_state;return ca;},{},s.event_reminder_members.edges),ba=s.lightweight_event_creator;return {creator_id:c('bs_js_primitive').is_nil_undef(ba)?null:ba.id,event_members:aa,event_time:s.time,event_type:s.lightweight_event_type,latitude:u[0],longitude:u[1],location_address:w,location_name:s.location_name,note:s.note,oid:s.id,related_event:s.related_event,repeat_mode:s.repeat_mode,seconds_to_notify_before:s.seconds_to_notify_before,status:s.lightweight_event_status,title:s.event_title,track_rsvp:z};}function i(s){var t=s.associated_object;if(c('bs_js_primitive').is_nil_undef(t)){return null;}else{var u=t.action_link,v=t.profile_picture;return {id:t.id,name:t.name,action_link:c('bs_js_primitive').is_nil_undef(u)?null:new (c('URI'))(u).setDomain("www.facebook.com"),profile_picture:c('bs_js_primitive').is_nil_undef(v)?null:{uri:v.uri},room_type:t.room_type,privacy_mode:t.privacy_mode,approval_mode_toggleable:t.approval_mode_toggleable};}}function j(s){var t=s.related_page_thread;if(c('bs_js_primitive').is_nil_undef(t)){return null;}else{var u=t.page,v=c('bs_js_primitive').is_nil_undef(u)?[]:c('bs_array').map(function(w){return w.name;},u.custom_tags.nodes);return {flagged:t.is_flagged,customTagNames:v};}}function k(s){var t=s.thread_key.other_user_id;if(c('bs_js_primitive').is_nil_undef(t)){return 0;}else{var u=s.all_participants.nodes;return c('bs_array').fold_left(function(v,w){var x=w.messaging_actor;if(x.id===t){return +(x.__typename==="User");}else return v;},0,u);}}function l(s){if(s.length){var t={};c('bs_array').iter(function(u){var v=u.nickname;if(c('bs_js_primitive').is_nil_undef(v)){return 0;}else{t[u.participant_id]=v;return 0;}},s);return t;}else return null;}function m(s){if(!c('bs_js_primitive').is_nil_undef(s)&&s!==""){return "#"+c('bs_string').sub(s,2,s.length-2|0);}else return null;}function n(s){if(c('bs_js_primitive').is_nil_undef(s)){return null;}else{var t={};c('bs_array').iter(function(u){t[u.participant_id]=u.days_active;return 0;},s);return t;}}function o(s){if(c('bs_js_primitive').is_nil_undef(s)){return null;}else{var t={};c('bs_array').iter(function(u){t[u.participant_id]=u.participant_message_count;return 0;},s);return t;}}function p(s){if(c('bs_js_primitive').is_nil_undef(s)){return undefined;}else{var t={};c('bs_array').iter(function(u){t[u.participant_id]=u.reacted_to_count;return 0;},s);return t;}}function q(s){return c('bs_caml_array').caml_array_get(s,0);}function r(s,t,u){var v=t.customization_info,w;if(c('bs_js_primitive').is_nil_undef(v)){w=[null,null,null];}else{var x=v.emoji;w=[m(v.outgoing_bubble_color),c('bs_js_primitive').is_nil_undef(x)?null:{emoji:x},l(v.participant_customizations)];}var y=t.last_message.nodes.length?[c('bs_caml_array').caml_array_get(t.last_message.nodes,0)]:0,z=t.last_read_receipt.nodes.length?[c('bs_caml_array').caml_array_get(t.last_read_receipt.nodes,0)]:0,aa;if(y){var ba=y[0];aa=c('messengerAttachmentTransformerRe').transformAttachment(s,{extensible_attachment:ba.extensible_attachment,blob_attachments:ba.blob_attachments,sticker:ba.sticker},u);}else aa=[];var ca=t.cannot_reply_reason,da=t.thread_queue_metadata,ea=t.thread_type,fa=t.montage_thread,ga=t.image,ha=t.thread_key.other_user_id,ia=t.thread_queue_metadata,ja=t.name,ka=t.thread_key.other_user_id,la;if(c('bs_js_primitive').is_nil_undef(ka)){var ma=t.thread_key.thread_fbid;la=c('bs_js_primitive').is_nil_undef(ma)?t.thread_key.legacy_thread_id:ma;}else la=ka;var na=t.thread_key.legacy_thread_id,oa=t.rtc_call_data,pa;if(c('bs_js_primitive').is_nil_undef(oa)){pa=null;}else{var qa=oa.initiator;pa={call_state:oa.call_state,server_info_data:oa.server_info_data,initiator_fbid:c('bs_js_primitive').is_nil_undef(qa)?0:c('bs_caml_format').caml_float_of_string(qa.id)};}return {admin_ids:c('bs_array').map(function(ra){return ra.id;},t.thread_admins),approval_mode:t.approval_mode,approval_queue_ids:c('bs_js_primitive').is_nil_undef(da)?[]:c('bs_array').map(function(ra){return c('MercuryIDs').getParticipantIDFromUserID(ra.id);},da.approval_requests.nodes),can_reply:c('bs_js_primitive').is_nil_undef(ca)?true:false,cannot_reply_reason:t.cannot_reply_reason,custom_color:w[0],custom_like_icon:w[1],custom_nickname:w[2],customization_enabled:t.customization_enabled,thread_type:c('bs_js_primitive').is_nil_undef(ea)?null:c('bs_js_null_undefined').from_opt(c('bs_js_primitive').undefined_to_opt(c('MessagingThreadType')[ea])),participant_add_mode:t.participant_add_mode_as_string,ephemeral_ttl_mode:t.ephemeral_ttl_mode,folder:c('bs_string').lowercase(t.folder),has_email_participant:c('bs_js_primitive').is_nil_undef(ca)?false:c('bs_js_boolean').to_js_boolean(+(ca===c('MessengerThreadCannotReplyReason').HAS_EMAIL_PARTICIPANT)),has_montage:c('bs_js_primitive').is_nil_undef(fa)?false:true,image_src:c('bs_js_primitive').is_nil_undef(ga)?null:ga.uri,is_archived:c('bs_js_boolean').to_js_boolean(t.has_viewer_archived),is_canonical_user:c('bs_js_boolean').to_js_boolean(k(t)),is_canonical:c('bs_js_primitive').is_nil_undef(ha)?false:true,is_pin_protected:c('bs_js_boolean').to_js_boolean(t.is_pin_protected),is_subscribed:c('bs_js_boolean').to_js_boolean(t.is_viewer_subscribed),is_thread_queue_enabled:c('bs_js_primitive').is_nil_undef(ia)?false:true,joinable_mode:{mode:c('bs_caml_format').caml_int_of_string(t.joinable_mode.mode),link:t.joinable_mode.link},last_message_timestamp:y?c('bs_caml_format').caml_float_of_string(y[0].timestamp_precise):0,last_message_type:y?y[0].commerce_message_type:null,last_read_timestamp:z?c('bs_caml_format').caml_float_of_string(z[0].timestamp_precise):0,lightweight_event:t.event_reminders.nodes.length?h(c('bs_caml_array').caml_array_get(t.event_reminders.nodes,0)):null,message_count:t.message_count,mute_until:t.mute_until,name:c('bs_js_primitive').is_nil_undef(ja)?"":ja,other_user_fbid:t.thread_key.other_user_id,page_thread_info:j(t),participants:c('bs_array').map(function(ra){return c('MercuryIDs').getParticipantIDFromUserID(ra.messaging_actor.id);},t.all_participants.nodes),participant_days_active:n(t.participant_days_active),participant_message_counts:o(t.participant_message_counts),participant_reacted_to_counts:p(t.participant_reacted_to_counts),read_only:c('bs_js_primitive').is_nil_undef(ca)?false:c('bs_js_boolean').to_js_boolean(+(ca===c('MessengerThreadCannotReplyReason').READ_ONLY)),recipients_loadable:c('bs_js_primitive').is_nil_undef(ca)?true:c('bs_js_boolean').to_js_boolean(+(ca!==c('MessengerThreadCannotReplyReason').RECIPIENTS_NOT_LOADABLE)),server_timestamp:c('bs_caml_format').caml_float_of_string(t.updated_time_precise),snippet_attachments:aa,snippet_sender:y?c('MercuryIDs').getParticipantIDFromUserID(y[0].message_sender.messaging_actor.id):null,snippet:y?y[0].snippet:null,thread_fbid:la,thread_id:c('bs_js_primitive').is_nil_undef(na)?"":na,timestamp:c('bs_caml_format').caml_float_of_string(t.updated_time_precise),top_emojis:t.top_emojis,unread_count:t.unread_count,rtc_call_data:pa,associated_object:i(t),reactions_mute_mode:t.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:t.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1};}g._getLightweightEvent=h;g._getAssociatedObject=i;g._getPageThreadInfo=j;g._getIsCanonicalUser=k;g._getNicknames=l;g._getCustomColor=m;g._getParticipantDaysActive=n;g._getParticipantMessageCounts=o;g._getParticipantReactedToCounts=p;g.indexZero=q;g.transformThread=r;}),null);
__d('messengerGraphQLThreadFetcherRe',['Promise','bs_array','getByPath','bs_caml_array','bs_pervasives','WebGraphQL','bs_js_primitive','messengerThreadTransformerRe','messengerMessageTransformerRe','MessengerThreadsWebGraphQLQuery','messengerReadReceiptTransformerRe'],(function a(b,c,d,e,f,g){'use strict';function h(l,m,n){var o=c('bs_array').map(function(p){var q=c('messengerMessageTransformerRe').unsafeCastBlobAttachments(p),r=p.extensible_attachment,s;if(c('bs_js_primitive').is_nil_undef(r)){s=null;}else{var t=r.story_attachment;s={legacy_attachment_id:r.legacy_attachment_id,story_attachment:c('bs_js_primitive').is_nil_undef(t)?null:c('messengerMessageTransformerRe').unsafeCastExtensibleAttachment(t)};}return {snippet:p.snippet,message_sender:p.message_sender,timestamp_precise:p.timestamp_precise,commerce_message_type:p.commerce_message_type,extensible_attachment:s,blob_attachments:q,sticker:p.sticker};},m.last_message.nodes);return c('messengerThreadTransformerRe').transformThread(l,{thread_key:m.thread_key,name:m.name,all_participants:m.all_participants,last_message:{nodes:o},unread_count:m.unread_count,message_count:m.messages_count,image:m.image,updated_time_precise:m.updated_time_precise,mute_until:m.mute_until,is_pin_protected:m.is_pin_protected,is_viewer_subscribed:m.is_viewer_subscribed,thread_queue_enabled:m.thread_queue_enabled,folder:m.folder,has_viewer_archived:m.has_viewer_archived,cannot_reply_reason:m.cannot_reply_reason,ephemeral_ttl_mode:m.ephemeral_ttl_mode,customization_info:m.customization_info,thread_admins:m.thread_admins,approval_mode:m.approval_mode,joinable_mode:m.joinable_mode,thread_queue_metadata:m.thread_queue_metadata,event_reminders:m.event_reminders,montage_thread:m.montage_thread,last_read_receipt:m.last_read_receipt,related_page_thread:m.related_page_thread,rtc_call_data:m.rtc_call_data,associated_object:m.associated_object,reactions_mute_mode:m.reactions_mute_mode,mentions_mute_mode:m.mentions_mute_mode,privacy_mode:m.privacy_mode,customization_enabled:m.customization_enabled,thread_type:m.thread_type,participant_add_mode_as_string:m.participant_add_mode_as_string,top_emojis:m.top_emojis,participant_days_active:m.participant_days_active,participant_message_counts:m.participant_message_counts,participant_reacted_to_counts:m.participant_reacted_to_counts},n);}function i(l,m,n,o,p){if(c('bs_js_primitive').is_nil_undef(l)){if(o!==0){return {actions:null,thread:undefined,end_of_history:{type:"user",fbid:m},roger:null};}else return {actions:null,thread:undefined,end_of_history:undefined,roger:null};}else{var q=l.thread_key.other_user_id,r=l.thread_key.thread_fbid,s=l.thread_key.legacy_thread_id,t=c('bs_js_primitive').is_nil_undef(q)?c('bs_js_primitive').is_nil_undef(r)?c('bs_js_primitive').is_nil_undef(s)?c('bs_pervasives').failwith("No thread ID"):s:r:q;if(t!==m)c('bs_pervasives').failwith("Thread ID mismatch");var u=h(n,l,p),v=l.messages,w=c('bs_js_primitive').is_nil_undef(v)?null:c('bs_array').map(function(ba){return c('messengerMessageTransformerRe').transformMessage(n,ba,{thread_id:l.thread_key.legacy_thread_id,thread_fbid:l.thread_key.thread_fbid,other_user_fbid:l.thread_key.other_user_id,folder:u.folder},p);},v.nodes),x=l.read_receipts,y;if(c('bs_js_primitive').is_nil_undef(x)){y=null;}else{var z={};z[m]=c('messengerReadReceiptTransformerRe').transformReadReceipt(n,x);y=z;}var aa=c('getByPath')(l,["messages","page_info"]);if(c('bs_js_primitive').is_nil_undef(aa)){return {actions:w,thread:u,end_of_history:undefined,roger:y};}else if(aa.has_previous_page){return {actions:w,thread:u,end_of_history:undefined,roger:y};}else return {actions:w,thread:u,end_of_history:{type:"thread",fbid:m},roger:y};}}function j(l){return new (c('MessengerThreadsWebGraphQLQuery'))({id:l.id,message_limit:l.limit,load_messages:+(l.limit>0),load_read_receipts:l.loadReadReceipts,before:l.timestamp});}function k(l,m,n){var o=c('bs_array').map(j,m);return c('Promise').all(c('WebGraphQL').execAll(o,{actorID:n?l:null})).then(function(p){return c('bs_array').mapi(function(q,r){var s=r.message_thread,t=c('bs_caml_array').caml_array_get(m,q);return i(s,t.id,l,t.isCanonical,n);},p);});}g.transformThread=h;g._transformPayload=i;g._getQuery=j;g.fetchAll=k;}),null);