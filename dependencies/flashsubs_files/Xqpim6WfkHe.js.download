if (self.CavalryLogger) { CavalryLogger.start_js(["mKAHi"]); }

__d("CreditCardFormParam",[],(function a(b,c,d,e,f,g){f.exports={ACCOUNT_ID:"account_id",ACCOUNT_COUNTRY_CODE:"account_country_code",APP_ID:"app_id",CARD_EXPIRATION:"exp",CARD_FBID:"cc_fbid",CARD_ID:"cc_id",CARD_TYPE:"cardType",CITY:"city",CONTEXT_ID:"context_id",COUNTRY:"country",CSC_LENGTH:"csc_length",EMAIL:"email",FIRST_NAME:"firstName",TRACKING_ID:"tracking_id",JSFAIL_SOURCE:"jsfail_source",KEYPRESS_TIMES:"kpts",LAST_NAME:"lastName",MONTH:"month",STATE:"state",STREET:"street",STREET_2:"street2",VALIDATE_ADDRESS:"validate_address",VALIDATE_NAME:"validate_name",VALIDATE_ZIP:"validate_zip",YEAR:"year",ZIP:"zip",VALIDATOR_CHECKS:"checks",CARD_NUMBER:"creditCardNumber",CSC:"csc",CARD_NUMBER_FIRST_6:"creditCardNumber_first6",CARD_NUMBER_LAST_4:"creditCardNumber_last4",CARD_NUMBER_TOKEN:"creditCardNumber_token",CSC_TOKEN:"csc_token",AUTH_LEVEL_FLAG:"auth_level",AUTH_AMOUNT:"auth_amount",AUTH_CURRENCY:"auth_currency",AUTO_EXPAND_AUTH_LEVEL_FLAG:"auto_expand_auth_level",PAYMENT_ITEM_TYPE:"payment_item_type",COMBINED_PAYMENT_TYPE:"combined_payment_type",CREDENTIAL_ID:"credential_id",IS_STORED_BALANCE:"is_stored_balance",IS_CHECKOUT_ELIGIBLE:"is_checkout_eligible",CHECKOUT_SAVE_CC_WITH_AUTH:"checkout_save_cc_with_auth",CHECKOUT_FUND_AMOUNT:"checkout_fund_amount",FLOW_PLACEMENT:"flow_placement",FLOW_TYPE:"flow_type",STORED_BALANCE_STATUS:"stored_balance_status"};}),null);
__d("P2PPasswordProtectionParam",[],(function a(b,c,d,e,f,g){f.exports={STATUS:"status"};}),null);
__d("P2PPaymentCampaignNames",[],(function a(b,c,d,e,f,g){f.exports={ZANGOOSE:"zangoose",SEVIPER:"seviper",PICHU:"pichu",REFERRAL:"referral"};}),null);
__d("P2PTransferParam",[],(function a(b,c,d,e,f,g){f.exports={TRANSFER_ID:"transfer_id",STATUS:"status",SENDER_STATUS:"sender_status",RECEIVER_STATUS:"receiver_status",RISK_RESULT:"risk_result"};}),null);
__d("PaymentActionAPIFields",[],(function a(b,c,d,e,f,g){f.exports={AUTHORIZE:"authorize",CAPTURE:"capture",CHARGE:"charge",REFUND:"refund",VOID:"void",CHARGEBACK:"chargeback",CHARGEBACK_REVERSAL:"chargeback_reversal",SALE:"sale",GEN_ASYNC_CREDENTIAL:"gen_async_credential"};}),null);
__d('P2PAPIUtils',['fbt','CreditCardFormParam','guid'],(function a(b,c,d,e,f,g,h){var i=[1001,1004,1006,1002],j={getRandomDigits:function k(l){return Math.random().toString().slice(2,2+l);},genRequestID:function k(){return 'id:'+c('guid')()+':'+Date.now();},genOfflineThreadingID:function k(){return Date.now()+''+j.getRandomDigits(6);},getUncaughtErrorMessage:function k(l){if(l&&i.indexOf(l)!==-1)return h._("Sorry, we were unable to complete your request. Please check that you are connected to the Internet or refresh this page and try again.");return h._("Sorry, something went wrong. Please try again later.");},prepareCardMutationData:function k(l){var m={},n=l[c('CreditCardFormParam').CARD_NUMBER].replace(/ /g,'');m[c('CreditCardFormParam').CARD_NUMBER]=n;if(typeof l[c('CreditCardFormParam').CARD_EXPIRATION]==='string'){var o=l[c('CreditCardFormParam').CARD_EXPIRATION].split('/');m[c('CreditCardFormParam').MONTH]=o[0];m[c('CreditCardFormParam').YEAR]=o[1];m[c('CreditCardFormParam').CARD_EXPIRATION]={};m[c('CreditCardFormParam').CARD_EXPIRATION][c('CreditCardFormParam').MONTH]=m[c('CreditCardFormParam').MONTH];m[c('CreditCardFormParam').CARD_EXPIRATION][c('CreditCardFormParam').YEAR]=m[c('CreditCardFormParam').YEAR];}else{m[c('CreditCardFormParam').MONTH]=l[c('CreditCardFormParam').CARD_EXPIRATION][c('CreditCardFormParam').MONTH];m[c('CreditCardFormParam').YEAR]=l[c('CreditCardFormParam').CARD_EXPIRATION][c('CreditCardFormParam').YEAR];}return babelHelpers['extends']({},l,m);}};f.exports=j;}),null);
__d('PaymentTokenProxyUtils',['CurrentEnvironment','URI'],(function a(b,c,d,e,f,g){var h={getURI:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=new (c('URI'))('/ajax/payment/token_proxy.php').setDomain(window.location.hostname).setProtocol('https').addQueryData(j),m=l.getDomain().split('.');if(m.indexOf('secure')<0){m.splice(1,0,'secure');if(k==='www'||k==='secure'){if(m[0]!=='secure')m.shift();}else if(k!==null){if(m[0]==='secure'){m.splice(0,0,k);}else m[0]=k;}else if(m[0]=='www')m.shift();l.setDomain(m.join('.'));}if(c('CurrentEnvironment').messengerdotcom){var n=l.getDomain();n=n.replace('messenger.com','facebook.com');l.setDomain(n);}return l;}};f.exports=h;}),null);
__d("XCommerceConsumerReceiptUploadCompletionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction-invoice\/update\/receipt-upload\/",{});}),null);
__d("XCommerceTransactionInvoiceDetailsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/transaction_invoice_details\/",{invoice_id:{type:"String",required:true}});}),null);
__d("XMoneypennyPaymentsCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/moneypenny\/payments\/_create\/",{});}),null);
__d("XP2PAddressCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/address\/_create\/",{});}),null);
__d("XP2PAddressesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/addresses\/",{});}),null);
__d("XP2PBannerDismissalsUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/banner_dismissals\/_update\/",{banner_type:{type:"String",required:true}});}),null);
__d("XP2PBannerStatesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/banner_states\/",{});}),null);
__d("XP2PBannerViewsUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/banner_views\/_update\/",{banner_type:{type:"String",required:true}});}),null);
__d("XP2PCardBINValidateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/card_bin\/validate\/",{bin_number:{type:"String",required:true}});}),null);
__d("XP2PCreditCardCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/credit_cards\/_create\/",{});}),null);
__d("XP2PCreditCardDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/credit_cards\/_delete\/",{});}),null);
__d("XP2PCreditCardUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/credit_cards\/_update\/",{});}),null);
__d("XP2PCreditCardVerifyController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/credit_cards\/_verify\/",{});}),null);
__d("XP2PCreditCardsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/credit_cards\/",{});}),null);
__d("XP2PCurrentUserProfileDataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/current_user_profile_data\/",{});}),null);
__d("XP2PExtensiveTransferDetailsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transaction\/details\/",{id:{type:"String",required:true}});}),null);
__d("XP2PFriendPickerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/friend_picker\/",{limit:{type:"Int",defaultValue:100},query:{type:"String"}});}),null);
__d("XP2PPasswordProtectionStatusController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/password_protection_status\/",{});}),null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/password_protection_status\/_update\/",{});}),null);
__d("XP2PPaymentRequestCancelController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/payment_requets\/_cancel\/",{});}),null);
__d("XP2PPaymentRequestCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/payment_requests\/_create\/",{});}),null);
__d("XP2PPaymentRequestDeclineController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/payment_requets\/_decline\/",{});}),null);
__d("XP2PPendingPaymentRequestsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/pending_payment_requests\/",{});}),null);
__d("XP2PPlatformContextController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/platform_context\/",{platform_context_id:{type:"String",required:true}});}),null);
__d("XP2PPlatformMsgrCommerceCartCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/platform\/msgr_commerce\/create\/",{});}),null);
__d("XP2PPlatformSetShippingAddressController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/platform\/set_shipping_address\/",{});}),null);
__d("XP2PPresetCreditCardSetController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/preset_credit_card\/_set\/",{});}),null);
__d("XP2PProductItemBannerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/product_item_banner\/",{other_user_id:{type:"String",required:true}});}),null);
__d("XP2PProductItemBannerDismissalController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/product_item_banner\/_dismiss\/",{platform_context_id:{type:"String",required:true}});}),null);
__d("XP2PProductItemBannerMarkSoldController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/product_item_banner\/_mark_sold\/",{platform_context_id:{type:"String",required:true}});}),null);
__d("XP2PTransactionsCampaignCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transactions\/campaign\/_create\/",{});}),null);
__d("XP2PTransactionsCancelController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transactions\/_cancel\/",{});}),null);
__d("XP2PTransactionsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transactions\/",{since:{type:"Int"}});}),null);
__d("XP2PTransactionsCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transactions\/_create\/",{});}),null);
__d("XP2PTransactionsDeclineController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transactions\/_decline\/",{});}),null);
__d("XP2PUserEligibilityController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/user_eligibility\/",{user_ids:{type:"StringVector",required:true}});}),null);
__d("XPayPagesCommercePaymentsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pay\/pages_commerce_payments\/_charge\/",{});}),null);
__d('P2PAPI',['AsyncRequest','CreditCardFormParam','P2PActions','P2PAPIUtils','P2PLogger','P2PGKValues','P2PPasswordProtectionParam','P2PPaymentCampaignNames','P2PPaymentLoggerEvent','P2PPaymentRequestStatus','P2PTransferParam','PaymentActionAPIFields','PaymentTokenProxyUtils','ImmutableObject','XCommerceConsumerReceiptUploadCompletionController','XCommerceTransactionInvoiceDetailsController','XMoneypennyPaymentsCreateController','XP2PAddressesController','XP2PAddressCreateController','XP2PBannerDismissalsUpdateController','XP2PBannerStatesController','XP2PBannerViewsUpdateController','XP2PCardBINValidateController','XP2PCreditCardDeleteController','XP2PCreditCardUpdateController','XP2PCreditCardCreateController','XP2PCreditCardVerifyController','XP2PCreditCardsController','XP2PCurrentUserProfileDataController','XP2PExtensiveTransferDetailsController','XP2PFriendPickerController','XP2PPasswordProtectionStatusController','XP2PPasswordProtectionStatusUpdateController','XP2PPaymentRequestCancelController','XP2PPaymentRequestCreateController','XP2PPaymentRequestDeclineController','XP2PPendingPaymentRequestsController','XP2PPlatformContextController','XP2PPlatformMsgrCommerceCartCreateController','XP2PPlatformSetShippingAddressController','XP2PPresetCreditCardSetController','XP2PProductItemBannerController','XP2PProductItemBannerDismissalController','XP2PProductItemBannerMarkSoldController','XP2PTransactionsCampaignCreateController','XP2PTransactionsCancelController','XP2PTransactionsCreateController','XP2PTransactionsController','XP2PTransactionsDeclineController','XP2PUserEligibilityController','XPayPagesCommercePaymentsController','emptyFunction','isEmpty'],(function a(b,c,d,e,f,g){'use strict';var h=function j(k,event){if(c('P2PGKValues').P2PWWWClientExceptionLogging)c('P2PLogger').log(event,{exception_message:k.getErrorDescription(),exception_code:k.getError()});},i={getAllCreditCards:function j(){var k=c('XP2PCreditCardsController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(k).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(l){var m=l.getPayload(),n=!m.error?m:[];c('P2PActions').updateCreditCards(n);}).setErrorHandler(function(l){c('P2PActions').updateCreditCardsError();}).send();},createTransaction:function j(k){var l=c('XP2PTransactionsCreateController').getURIBuilder().getURI(),m={},n=k.formData,o=k.success||c('emptyFunction'),p=k.error||c('emptyFunction');m[c('CreditCardFormParam').CREDENTIAL_ID]=n[c('CreditCardFormParam').CREDENTIAL_ID];m.amount=n.amount;m.receiver_id=n.receiverId;m.offline_threading_id=c('P2PAPIUtils').genOfflineThreadingID();m.group_thread_fbid=n.group_thread_fbid;m.platform_context_id=n.platform_context_id;m.shipping_address_id=n.shippingAddressID;m.shipping_option_id=n.shippingOptionID;m.memo_text=n.memoText;m.memo_image_ids=n.memoPhotoIDs;m.payment_request_id=n.paymentRequestID;new (c('AsyncRequest'))().setData(m).setMethod('POST').setURI(l).setAllowCrossPageTransition(true).setHandler(function(q){var r=q?q.getPayload():{};if(r.error){p(r.error);}else{o(r);this.getAllCreditCards();if(m.payment_request_id)c('P2PActions').paymentRequestUpdated({id:m.payment_request_id,currentStatus:c('P2PPaymentRequestStatus').TRANSFER_COMPLETED});}}.bind(this)).setErrorHandler(function(q){p({message:c('P2PAPIUtils').getUncaughtErrorMessage(q.getError())});h(q,c('P2PPaymentLoggerEvent').UI_ACTN_CREATE_TRANSFER_EXCEPTION);}).send();},addCreditCard:function j(k){c('P2PActions').ignoreCreditCardChannelEvents();var l=c('XP2PCreditCardCreateController').getURIBuilder(),m=l.getURI().getPath(),n=k.onSuccess||c('emptyFunction'),o=k.onError||c('emptyFunction'),p=c('PaymentTokenProxyUtils').getURI({tpe:m});k=c('P2PAPIUtils').prepareCardMutationData(k);var q=new (c('ImmutableObject'))(k),r=k.hasPlatformContext;delete k.onSuccess;delete k.onError;c('P2PActions').creditCardSaving();new (c('AsyncRequest'))().setAllowCrossOrigin(true).setURI(p).setData(k).setMethod('POST').setHandler(function(s){var t=s.getPayload();if(!t.errors){q=c('ImmutableObject').set(q,t);c('P2PActions').addCreditCard(q);if(t.isPreset)c('P2PActions').transferAccepted();if(r)c('P2PActions').checkoutCreditCardSelected(t[c('CreditCardFormParam').CREDENTIAL_ID]);n();}else{c('P2PActions').addCreditCardError(babelHelpers['extends']({requestID:q.requestID},t));o(t);}c('P2PActions').allowCreditCardChannelEvents();}).setErrorHandler(function(s){c('P2PActions').addCreditCardError({requestID:q.requestID,errors:{general:{message:c('P2PAPIUtils').getUncaughtErrorMessage(s.getError())}}});c('P2PActions').allowCreditCardChannelEvents();h(s,c('P2PPaymentLoggerEvent').UI_ACTN_ADD_CARD_EXCEPTION);}).send();},getTransactions:function j(k){k=k||{};var l={},m=k,n=c('XP2PTransactionsController').getURIBuilder().getURI(),o=new (c('ImmutableObject'))(m);if(m.since)l.since=m.since;return new (c('AsyncRequest'))().setData(l).setURI(n).setMethod('GET').setReadOnly(true).setHandler(function(p){var q=p.getPayload();if(!q.error){c('P2PActions').updateTransfers(q);}else c('P2PActions').updateTransfersError(babelHelpers['extends']({requestID:o.requestID},q));}).setErrorHandler(function(p){c('P2PActions').updateTransfersError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(p.getError())},requestID:o.requestID});}).send();},getExtensiveTransferDetailsByID:function j(k){var l=c('XP2PExtensiveTransferDetailsController').getURIBuilder().setString('id',k).getURI();new (c('AsyncRequest'))().setURI(l).setMethod('GET').setReadOnly(true).setHandler(function(m){var n=m.getPayload();if(!n.error)c('P2PActions').extensiveTransferDetailsLoaded(n);}).send();},getNUXTransactions:function j(){var k=new Date(),l=Math.round(k.setDate(k.getDate()-15)/1000),m=c('XP2PTransactionsController').getURIBuilder().getURI();return new (c('AsyncRequest'))().setData({since:l}).setURI(m).setMethod('GET').setReadOnly(true).setHandler(function(n){var o=n.getPayload();if(!o.error)c('P2PActions').updateNUXTransfers(o);}).send();},updatePresetCreditCard:function j(k){var l=c('XP2PPresetCreditCardSetController').getURIBuilder().getURI();new (c('AsyncRequest'))().setData(k).setURI(l).setMethod('POST').setHandler(function(m){var n=m.getPayload();if(!n.error){c('P2PActions').updatePresetCreditCard(babelHelpers['extends']({},n,{requestID:k.requestID}));c('P2PActions').transferAccepted();}else c('P2PActions').updatePresetCreditCardError(babelHelpers['extends']({},n,{requestID:k.requestID}));}).setErrorHandler(function(m){c('P2PActions').updatePresetCreditCardError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(m.getError())},requestID:k.requestID});h(m,c('P2PPaymentLoggerEvent').UI_ACTN_UPDATE_PRESET_CARD_EXCEPTION);}).send();},updateCreditCard:function j(k){c('P2PActions').ignoreCreditCardChannelEvents();var l=c('XP2PCreditCardUpdateController').getURIBuilder(),m=l.getURI().getPath(),n=c('PaymentTokenProxyUtils').getURI({tpe:m});k=c('P2PAPIUtils').prepareCardMutationData(k);var o=new (c('ImmutableObject'))(k);new (c('AsyncRequest'))().setAllowCrossOrigin(true).setURI(n).setData(k).setMethod('POST').setHandler(function(p){var q=p.getPayload();if(!q.errors){c('P2PActions').updateCreditCard(o);}else c('P2PActions').updateCreditCardError(babelHelpers['extends']({},q,{requestID:o.requestID}));c('P2PActions').allowCreditCardChannelEvents();}).setErrorHandler(function(p){c('P2PActions').updateCreditCardError({errors:{general:{message:c('P2PAPIUtils').getUncaughtErrorMessage(p.getError())}},requestID:o.requestID});c('P2PActions').allowCreditCardChannelEvents();h(p,c('P2PPaymentLoggerEvent').UI_ACTN_UPDATE_CARD_EXCEPTION);}).send();},deleteCreditCard:function j(k){var l=c('XP2PCreditCardDeleteController').getURIBuilder().getURI();new (c('AsyncRequest'))().setData(k).setMethod('POST').setURI(l).setHandler(function(m){var n=m.getPayload();if(!n.error){c('P2PActions').deleteCreditCard(babelHelpers['extends']({},n,{requestID:k.requestID}));}else c('P2PActions').deleteCreditCardError(babelHelpers['extends']({},n,{requestID:k.requestID}));}).setErrorHandler(function(m){c('P2PActions').deleteCreditCardError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(m.getError())},requestID:k.requestID});}).send();},getPasswordProtectionSetting:function j(k){var l=c('XP2PPasswordProtectionStatusController').getURIBuilder().getURI(),m=k.success||c('emptyFunction'),n=k.error||c('emptyFunction');new (c('AsyncRequest'))().setURI(l).setMethod('GET').setReadOnly(true).setHandler(function(o){var p=o?o.getPayload():[];if(p.error){n();}else m(p);}).setErrorHandler(function(o){n();}).send();},setPasswordProtectionSetting:function j(k){var l=c('XP2PPasswordProtectionStatusUpdateController').getURIBuilder().getURI(),m=k.formData,n=k.success||c('emptyFunction'),o=k.error||c('emptyFunction'),p={};p[c('P2PPasswordProtectionParam').STATUS]=m[c('P2PPasswordProtectionParam').STATUS];new (c('AsyncRequest'))().setData(p).setURI(l).setMethod('POST').setHandler(function(q){var r=q?q.getPayload():{};if(r.error){o(r.error);}else n();}).setErrorHandler(function(q){o();}).send();},declineTransaction:function j(k){var l=c('XP2PTransactionsDeclineController').getURIBuilder().getURI(),m=k.formData,n=k.success||c('emptyFunction'),o=k.error||c('emptyFunction'),p={};p[c('P2PTransferParam').TRANSFER_ID]=m[c('P2PTransferParam').TRANSFER_ID];new (c('AsyncRequest'))().setData(p).setURI(l).setMethod('POST').setHandler(function(q){var r=q?q.getPayload():{},s={};if(r.error){o(r.error);}else{n();s[c('P2PTransferParam').TRANSFER_ID]=p[c('P2PTransferParam').TRANSFER_ID];c('P2PActions').transferDeclined(s);}}).setErrorHandler(function(q){o();h(q,c('P2PPaymentLoggerEvent').UI_ACTN_DECLINE_TRANSFER_EXCEPTION);}).send();},cancelTransaction:function j(k){var l=c('XP2PTransactionsCancelController').getURIBuilder().getURI(),m=k.formData,n=k.success||c('emptyFunction'),o=k.error||c('emptyFunction'),p={};p[c('P2PTransferParam').TRANSFER_ID]=m[c('P2PTransferParam').TRANSFER_ID];new (c('AsyncRequest'))().setData(p).setURI(l).setMethod('POST').setHandler(function(q){var r=q?q.getPayload():{};if(r.error){o(r.error);}else n();}).setErrorHandler(function(q){o();}).send();},verifyCreditCard:function j(k){var l=c('XP2PCreditCardVerifyController').getURIBuilder(),m=l.getURI().getPath(),n=c('PaymentTokenProxyUtils').getURI({tpe:m});new (c('AsyncRequest'))().setAllowCrossOrigin(true).setURI(n).setData(k).setMethod('POST').setHandler(function(o){var p=o.getPayload();if(!p.error){c('P2PActions').verifyCreditCard(babelHelpers['extends']({},p,{requestID:k.requestID}));}else c('P2PActions').verifyCreditCardError(babelHelpers['extends']({},p,{requestID:k.requestID}));}).setErrorHandler(function(o){c('P2PActions').verifyCreditCardError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(o.getError())},requestID:k.requestID});h(o,c('P2PPaymentLoggerEvent').UI_ACTN_VERIFY_CARD_EXCEPTION);}).send();},validateBINNumber:function j(k){k=k||{};var l=new (c('ImmutableObject'))(k),m=c('XP2PCardBINValidateController').getURIBuilder().setString('bin_number',k.binNumber).getURI();return new (c('AsyncRequest'))().setURI(m).setMethod('GET').setReadOnly(true).setHandler(function(n){var o=n.getPayload();if(!o.error){c('P2PActions').binNumberValidated(babelHelpers['extends']({},o,{requestID:k.requestID}));}else c('P2PActions').binNumberValidatedError(babelHelpers['extends']({},o,{requestID:l.requestID}));}).send();},getUserEligibility:function j(k){k=k||{};var l=c('XP2PUserEligibilityController').getURIBuilder().setStringVector('user_ids',k.userIDs).getURI();return new (c('AsyncRequest'))().setURI(l).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(m){var n=m.getPayload();if(!n.error)c('P2PActions').userEligibilityUpdated(n);}).send();},getFriendsList:function j(k,l){var m=c('XP2PFriendPickerController').getURIBuilder().setInt('limit',k).setString('query',l).getURI();return new (c('AsyncRequest'))().setURI(m).setMethod('GET').setReadOnly(true).setHandler(function(n){var o=n.getPayload();if(!o.error)c('P2PActions').friendsListUpdated({friends:o,query:l});}).send();},getBannerStates:function j(){var k=c('XP2PBannerStatesController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(k).setMethod('GET').setReadOnly(true).setHandler(function(l){var m=l.getPayload();if(!m.error)c('P2PActions').bannerStatesUpdated(m);}).send();},incrementBannerViews:function j(k){var l=c('XP2PBannerViewsUpdateController').getURIBuilder().setString('banner_type',k).getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(l).send();},incrementBannerDismissals:function j(k){var l=void 0;c('P2PActions').bannerDismissed(k);l=c('XP2PBannerDismissalsUpdateController').getURIBuilder().setString('banner_type',k).getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(l).send();},createMoneypennyTransfer:function j(k){var l=c('XMoneypennyPaymentsCreateController').getURIBuilder().getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(l).setData({item_id:k.item_id,credential_id:k.credential_id,amount:k.amount,external_request_id:k.external_request_id}).setHandler(function(m){var n=m.getPayload();if(!n.error){c('P2PActions').moneypennyTransferCreated(babelHelpers['extends']({},n,{requestID:k.requestID}));this.getAllCreditCards();}else c('P2PActions').moneypennyTransferCreatedError(babelHelpers['extends']({},n,{requestID:k.requestID}));}.bind(this)).setErrorHandler(function(m){c('P2PActions').moneypennyTransferCreatedError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(m.getError())},requestID:k.requestID});h(m,c('P2PPaymentLoggerEvent').UI_ACTN_CREATE_M_TRANSFER_EXCEPTION);}).send();},createFinancialIncentivesTransfer:function j(k){var l=c('XP2PTransactionsCampaignCreateController').getURIBuilder().getURI(),m=k.success||c('emptyFunction'),n=k.error||c('emptyFunction'),o={};o[c('CreditCardFormParam').CREDENTIAL_ID]=k.credential_id;o.external_request_id=c('P2PAPIUtils').genOfflineThreadingID();o.campaign_name=c('P2PPaymentCampaignNames').SEVIPER;new (c('AsyncRequest'))().setData(o).setURI(l).setMethod('POST').setHandler(function(p){var q=p.getPayload();if(q.error){n(q.error);}else m();}).send();},getPlatformContextByOtherUserID:function j(k){k=k||{};var l=c('XP2PProductItemBannerController').getURIBuilder().setString('other_user_id',k.otherUserID).getURI();return new (c('AsyncRequest'))().setURI(l).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(m){var n=m.getPayload();if(!n.error&&!c('isEmpty')(n))c('P2PActions').addPlatformContext(n);}).send();},getPlatformContextByID:function j(k){k=k||{};var l=k.onSuccess||c('emptyFunction'),m=k.onError||c('emptyFunction'),n=c('XP2PPlatformContextController').getURIBuilder().setString('platform_context_id',k.id).getURI();return new (c('AsyncRequest'))().setURI(n).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(o){var p=o.getPayload();if(!p.error&&!c('isEmpty')(p)){c('P2PActions').addPlatformContext(p);l(p);}}).setErrorHandler(function(o){c('P2PActions').addPlatformContextError({itemID:k.productItemID,error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(o.getError())}});m();}).send();},dismissPlatformContextBanner:function j(k){var l=void 0;c('P2PActions').platformContextBannerDismissed(k);l=c('XP2PProductItemBannerDismissalController').getURIBuilder().setString('platform_context_id',k).getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(l).send();},markSoldPlatformContextProductItem:function j(k){var l=void 0;c('P2PActions').platformContextProductItemSold(k);l=c('XP2PProductItemBannerMarkSoldController').getURIBuilder().setString('platform_context_id',k).getURI();new (c('AsyncRequest'))().setMethod('POST').setURI(l).send();},getAddresses:function j(){var k=c('XP2PAddressesController').getURIBuilder().getURI();return new (c('AsyncRequest'))().setURI(k).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(l){var m=l.getPayload();if(!m.error)c('P2PActions').updateAddresses(m);}).send();},addAddress:function j(){var k=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],l=c('XP2PAddressCreateController').getURIBuilder().getURI(),m=void 0,n=k.platformContext,o=k.onSuccess||c('emptyFunction'),p=k.onError||c('emptyFunction');m={label:k.label,care_of:k.care_of,city:k.city,street1:k.street1,street2:k.street2,state:k.state,zip:k.zip,country:k.country};c('P2PActions').addressSaving();return new (c('AsyncRequest'))().setData(m).setURI(l).setMethod('POST').setHandler(function(q){var r=q.getPayload();if(!r.errors){c('P2PActions').addAddress(babelHelpers['extends']({},r,m,{requestID:k.requestID}));if(n){c('P2PActions').checkoutAddressSelected(r.id);this.setPlatformContextShippingAddress({platformContextID:n.id,shippingAddressID:r.id});}o();}else{c('P2PActions').addAddressError(babelHelpers['extends']({},r,{requestID:k.requestID}));p(r);}}.bind(this)).setErrorHandler(function(q){c('P2PActions').addAddressError({errors:{general:{message:c('P2PAPIUtils').getUncaughtErrorMessage(q.getError())}},requestID:k.requestID});h(q,c('P2PPaymentLoggerEvent').UI_ACTN_ADD_ADDRESS_EXCEPTION);}).send();},createMCCart:function j(k){var l=c('XP2PPlatformMsgrCommerceCartCreateController').getURIBuilder().getURI(),m=void 0,n=k.productItemID;k=k||{};m={item_id:n};c('P2PActions').checkoutCartInitiated();return new (c('AsyncRequest'))().setData(m).setURI(l).setMethod('POST').setHandler(function(o){var p=o.getPayload();if(!p.error){c('P2PActions').addPlatformContext(babelHelpers['extends']({},p));c('P2PActions').checkoutCartCreated({sellerID:k.sellerID,productItemID:n});}else c('P2PActions').addPlatformContextError(babelHelpers['extends']({itemID:n},p));}).setErrorHandler(function(o){c('P2PActions').addPlatformContextError({itemID:n,error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(o.getError())}});h(o,c('P2PPaymentLoggerEvent').UI_ACTN_CREATE_CART_EXCEPTION);}).send();},setPlatformContextShippingAddress:function j(k){var l=c('XP2PPlatformSetShippingAddressController').getURIBuilder().getURI(),m=void 0,n=k.platformContextID,o=k.shippingAddressID;k=k||{};m={platform_context_id:n,shipping_address_id:o};c('P2PActions').checkoutProcessing(true);return new (c('AsyncRequest'))().setData(m).setURI(l).setMethod('POST').setHandler(function(p){c('P2PActions').checkoutProcessing(false);var q=p.getPayload();if(!q.error)c('P2PActions').addPlatformContext(babelHelpers['extends']({},q));}).setErrorHandler(function(p){h(p,c('P2PPaymentLoggerEvent').UI_ACTN_SET_CART_ADDRESS_EXCEPTION);}).send();},getCurrentUserProfileData:function j(){var k=c('XP2PCurrentUserProfileDataController').getURIBuilder().getURI();return new (c('AsyncRequest'))().setURI(k).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(l){var m=l.getPayload();if(!m.error){c('P2PActions').checkoutBuyerProfileUpdated(m);}else c('P2PActions').checkoutBuyerProfileUpdated({});}).setErrorHandler(function(l){c('P2PActions').checkoutBuyerProfileUpdated({});}).send();},createPaymentRequest:function j(k){var l=c('XP2PPaymentRequestCreateController').getURIBuilder().getURI(),m=k.formData,n=m.amount,o=m.memoText,p=m.group_thread_fbid,q={amount:n,memo_text:o,offline_threading_id:c('P2PAPIUtils').genOfflineThreadingID(),group_thread_fbid:p,platform_context_id:m.platform_context_id},r=m.requestees,s=r.get(0)||{};if(r.size>1){q.requestee_ids=r.map(function(t){return t.userID;}).toJS();}else q.requestee_id=s.userID;c('P2PActions').paymentRequestInitiated();new (c('AsyncRequest'))().setData(q).setURI(l).setMethod('POST').setHandler(function(t){var u=t.getPayload();if(!u.error){c('P2PActions').paymentRequestCreated(babelHelpers['extends']({requesteeID:s.userID,amount:n,memoText:o},u));k.success(u);}else{c('P2PActions').paymentRequestCreatedError(u);k.error(u);}c('P2PActions').paymentRequestInitiatedComplete();}).setErrorHandler(function(t){k.error({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(t.getError())}});c('P2PActions').paymentRequestInitiatedComplete();h(t,c('P2PPaymentLoggerEvent').UI_ACTN_CREATE_REQUEST_EXCEPTION);}).send();},declinePaymentRequest:function j(k){var l=c('XP2PPaymentRequestDeclineController').getURIBuilder().getURI(),m=k.paymentRequestID,n=k.success||c('emptyFunction'),o=k.error||c('emptyFunction'),p={payment_request_id:m};c('P2PActions').paymentRequestDeclineInitiated();return new (c('AsyncRequest'))().setData(p).setURI(l).setMethod('POST').setHandler(function(q){var r=q.getPayload();if(!r.error){c('P2PActions').paymentRequestDeclined(m);c('P2PActions').hideDialog();n(r);}else{c('P2PActions').paymentRequestDeclineError(r);o(r);}}).setErrorHandler(function(q){c('P2PActions').paymentRequestDeclineError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(q.getError())}});o();h(q,c('P2PPaymentLoggerEvent').UI_ACTN_DECLINE_REQUEST_EXCEPTION);}).send();},cancelPaymentRequest:function j(k){var l=c('XP2PPaymentRequestCancelController').getURIBuilder().getURI(),m=k.paymentRequestID,n=k.success||c('emptyFunction'),o=k.error||c('emptyFunction'),p={payment_request_id:m};c('P2PActions').paymentRequestCancelInitiated();return new (c('AsyncRequest'))().setData(p).setURI(l).setMethod('POST').setHandler(function(q){var r=q.getPayload();if(!r.error){c('P2PActions').paymentRequestCanceled(m);c('P2PActions').hideDialog();n(r);}else{c('P2PActions').paymentRequestCancelError(r);o(r);}}).setErrorHandler(function(q){c('P2PActions').paymentRequestCancelError({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(q.getError())}});o();h(q,c('P2PPaymentLoggerEvent').UI_ACTN_CANCEL_REQUEST_EXCEPTION);}).send();},getPendingPaymentRequests:function j(){var k=c('XP2PPendingPaymentRequestsController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(k).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(l){var m=l.getPayload(),n=!m.error?m:[];c('P2PActions').paymentRequestsFetched(n);}).send();},getCommerceInvoiceDetails:function j(k){var l=c('XCommerceTransactionInvoiceDetailsController').getURIBuilder().setString('invoice_id',k.invoiceID).getURI(),m=k.onSuccess||c('emptyFunction'),n=k.onError||c('emptyFunction');new (c('AsyncRequest'))().setURI(l).setMethod('GET').setReadOnly(true).setHandler(function(o){var p=o.getPayload();if(!p.error){m(p);}else n(p);}).setErrorHandler(function(o){n({error:{message:c('P2PAPIUtils').getUncaughtErrorMessage(o.getError())}});}).send();},completeReceiptUploadCheckout:function j(k){var l=c('XCommerceConsumerReceiptUploadCompletionController').getURIBuilder().getURI(),m=k.onSuccess||c('emptyFunction'),n=k.onError||c('emptyFunction'),o={invoice_id:k.invoiceID,receipt_image_id:k.receiptImageID,selected_payment_option_id:k.selectedPaymentOptionID};new (c('AsyncRequest'))().setURI(l).setMethod('POST').setData(o).setAllowCrossOrigin(true).setHandler(function(p){var q=p.getPayload();if(!q||!q.error){m(q);}else n({message:c('P2PAPIUtils').getUncaughtErrorMessage()});}).setErrorHandler(function(p){n({message:c('P2PAPIUtils').getUncaughtErrorMessage(p.getError())});}).send();},completeNMORCheckout:function j(k){var l=k.success,m=k.error,n={nmor_order_type:k.nmorOrderType,action:c('PaymentActionAPIFields').SALE,receiver_id:k.receiverID,order_id:k.orderID,request_id:c('P2PAPIUtils').genRequestID(),currency:k.currency,credential_id:k.credentialId,shipping_address_id:k.shippingAddressID,shipping_option_id:k.shippingOptionID,payment_method:{type:k.paymentMethodType},payment_method_data:k.paymentMethodData,extra_data:k.extraData,amount:k.amount,csc:k.securityCode},o=c('XPayPagesCommercePaymentsController').getURIBuilder().getURI();if(n.credential_id&&n.csc){var p=o.getPath();o=c('PaymentTokenProxyUtils').getURI({tpe:p});}var q=new (c('AsyncRequest'))().setAllowCrossOrigin(true).setURI(o).setData(n).setMethod('POST');if(l)q.setHandler(function(r){var s=r.getPayload();if(s.error){m(s.error);}else l(s.id,s.extra_data);});if(m)q.setErrorHandler(function(r){m({message:c('P2PAPIUtils').getUncaughtErrorMessage(r.getError())});});q.send();}};f.exports=i;}),null);
__d('P2PUserEligibilityStore',['P2PActionConstants','EventEmitter','MercuryIDs','P2PAPI','P2PDispatcher','P2PGKValues'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k=void 0;h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);k={};j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}l.prototype.onEventDispatched=function(m){var n=m.data,o=m.type;switch(o){case c('P2PActionConstants').USER_ELIGIBILITY_UDPATED:this.handleEligibilityUpdated(n);this.emit('change');break;}};l.prototype.getEligibilityByUserIDs=function(m){var n=[],o=void 0,p=void 0,q={};for(var r=0;r<m.length;r++){p=m[r];o=k[p];if(o===undefined){k[p]=null;n.push(p);}q[p]=k[p];}if(c('P2PGKValues').P2PEnabled&&n.length)c('P2PAPI').getUserEligibility({userIDs:n});return q;};l.prototype.getEligibilityByUserID=function(m){var n=this.getEligibilityByUserIDs([m]);return n[m];};l.prototype.getEligibilityByThreadID=function(m){return this.getEligibilityByUserID(c('MercuryIDs').getUserIDFromThreadID(m));};l.prototype.handleEligibilityUpdated=function(m){for(var n=0;n<m.length;n++)k[m[n].user_id]=m[n].p2p_eligible;};f.exports=new l();}),null);
__d('createEmojiElement',['cx','JSXDOM'],(function a(b,c,d,e,f,g,h){function i(j,k,l){l=l||16;return c('JSXDOM').span({className:"_5mfr _47e3"},[c('JSXDOM').img({'aria-hidden':true,className:'img',height:l,src:k,width:l}),c('JSXDOM').span({className:"_7oe"},j)]);}f.exports=i;}),null);
__d('DOMEmoji',['cx','EmojiImageURL','EmojiRenderer','FBEmojiUtils','JSXDOM','SupportedFBEmoji','Utf16','createEmojiElement','flattenArray','isElementNode'],(function a(b,c,d,e,f,g,h){'use strict';var i={MAX_ITEMS:40,transform:function j(k,l){l=l||{};var m=l.size||16;return c('flattenArray')(k.map(function(n){if(!c('isElementNode')(n)){return c('EmojiRenderer').render(n,function(o){if(l.isSupportedEmoji){var p=c('FBEmojiUtils').getKeyFromCodepoints(o);if(l.isSupportedEmoji(p))return c('createEmojiElement')(o.join(''),c('EmojiImageURL').getMessengerURL(p,m),m);}else{var q=c('FBEmojiUtils').getSupportedKey(o);if(q)return c('createEmojiElement')(o.join(''),c('EmojiImageURL').getFBEmojiURL(q,m),m);}return c('JSXDOM').span({className:"_4ay8"+(m===16?' '+"_3kkw":'')},o.join(''));},this.MAX_ITEMS);}else return n;}.bind(this)));},params:function j(k){if(!k)return this;var l=this;return {__params:true,obj:l,params:k};}};f.exports=i;}),null);
__d('TransformTextToDOMMixin',['flattenArray','isElementNode'],(function a(b,c,d,e,f,g){var h=3,i={transform:function j(k,l){return c('flattenArray')(k.map(function(m){if(!c('isElementNode')(m)){var n=m,o=[],p=this.MAX_ITEMS||h;while(p--){var q=l?[n].concat(l):[n],r=this.match.apply(this,q);if(!r)break;o.push(n.substring(0,r.startIndex));o.push(r.element);n=n.substring(r.endIndex);}n&&o.push(n);return o;}return m;}.bind(this)));},params:function j(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];var n=this;return {__params:true,obj:n,params:l};}};f.exports=i;}),null);
__d('DOMEmote',['cx','fbt','EmojiImageURL','EmoticonEmojiList','EmoticonsList','JSXDOM','SupportedFBEmoji','TransformTextToDOMMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={MAX_ITEMS:40,match:function k(l,m){var n=m&&m.getMessengerEmote,o=n?c('EmoticonEmojiList').regexp.exec(l):c('EmoticonsList').regexp.exec(l);if(!o||!o.length)return false;var p=o[2],q=o.index+o[1].length,r=n?c('EmoticonEmojiList').names[p]:c('EmoticonsList').emotes[p];return {startIndex:q,endIndex:q+p.length,element:this._element(p,r,m)};},_element:function k(l,m,n){var o=n&&n.getMessengerEmote,p=o?o(m):c('EmoticonsList').emoji[m],q=null;if(o&&p){q=c('JSXDOM').img({'aria-hidden':true,className:'img',height:16,src:c('EmojiImageURL').getMessengerURL(p,16),width:16});}else if(p){q=c('JSXDOM').img({'aria-hidden':true,className:'img',height:16,src:c('SupportedFBEmoji')[p]?c('EmojiImageURL').getFBEmojiURL(p):c('EmojiImageURL').getFBEmojiExtendedURL(p),width:16});}else q=c('JSXDOM').span({'aria-hidden':true,className:'emoticon emoticon_'+m});var r=i._("{emoticonName} emoticon",[i.param('emoticonName',m)]);return c('JSXDOM').span({className:"_47e3 _5mfr",title:r},[q,c('JSXDOM').span({'aria-hidden':true,className:"_7oe"},l)]);}};f.exports=Object.assign(j,c('TransformTextToDOMMixin'));}),null);
__d('P2PTriggersUtils',['P2PGKValues'],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c('P2PGKValues').P2PEnabled)return false;return true;},getMatches:function j(k){return k.match(h);}};f.exports=i;}),null);
__d('DOMP2PTrigger',['cx','MessengerEnvironment','JSXDOM','P2PAmountUtils','P2PTriggersUtils','TransformTextToDOMMixin'],(function a(b,c,d,e,f,g,h){var i={MAX_ITEMS:40,match:function j(k){var l=c('P2PTriggersUtils').getMatches(k);if(!l||!l.length)return false;var m=l[0];if(!c('P2PAmountUtils').isValidSendAmount(m))return false;var n=l.index;return {startIndex:n,endIndex:n+m.length,element:this._element(m)};},_element:function j(k){return c('JSXDOM').a({href:"#",className:"_35i0"+(!c('MessengerEnvironment').messengerui?' '+"_4g4e":''),"data-p2p-trigger":k},k);}};f.exports=Object.assign(i,c('TransformTextToDOMMixin'));}),null);
__d('transformTextToDOM',['createArrayFromMixed'],(function a(b,c,d,e,f,g){function h(i,j){var k=[i];j=c('createArrayFromMixed')(j);j.forEach(function(l){var m,n=l;if(l.__params){m=l.params;n=l.obj;}k=n.transform(k,m);});return k;}f.exports=h;}),null);
__d('p2pTriggerJSXDOMToString',['DOMEmoji','DOMEmote','DOMP2PTrigger','JSXDOM','transformTextToDOM'],(function a(b,c,d,e,f,g){var h=function i(j,k,l,m,n,o){var p=[];if(m)p.push(c('DOMP2PTrigger'));if(k)n?p.push(c('DOMEmoji').params({isSupportedEmoji:n})):p.push(c('DOMEmoji'));if(l)o?p.push(c('DOMEmote').params({getMessengerEmote:o})):p.push(c('DOMEmote'));return c('JSXDOM').span(null,c('transformTextToDOM')(j,p)).innerHTML;};f.exports=h;}),null);
__d('P2PTriggers.react',['DOM','Event','MercuryIDs','P2PActions','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PUserEligibilityStore','StoreAndPropBasedStateMixin','React','ReactDOM','nullthrows','p2pTriggerJSXDOMToString'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'P2PTriggers',mixins:[c('StoreAndPropBasedStateMixin')(c('P2PUserEligibilityStore'))],propTypes:{getMessengerEmote:h.func,isSupportedEmoji:h.func,renderEmoji:h.bool,renderEmoticons:h.bool,text:h.string.isRequired,threadID:h.string.isRequired},getInitialState:function j(){return {amount:''};},statics:{calculateState:function j(k){var l=c('MercuryIDs').isGroupChat(k.threadID)||c('P2PUserEligibilityStore').getEligibilityByThreadID(k.threadID);return {isThreadEligible:l,otherUserID:c('MercuryIDs').getUserIDFromThreadID(k.threadID)};}},_clickListeners:null,componentDidMount:function j(){this._clickListeners=[];this.bindClickListeners();},componentWillUnmount:function j(){this.unbindClickListeners();},log:function j(k,l){c('P2PLogger').log(k,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND,object_id:this.state.otherUserID},l));},bindClickListeners:function j(){var k=c('nullthrows')(this._clickListeners);if(!k.length){var l=c('DOM').scry(c('ReactDOM').findDOMNode(this),'[data-p2p-trigger]');for(var m=0,n=l.length;m<n;m++)k.push(c('Event').listen(l[m],'click',this.handleTriggerClick));}},unbindClickListeners:function j(){var k=void 0;if(this._clickListeners){for(var l=0,m=this._clickListeners.length;l<m;l++){k=this._clickListeners[l];if(k)k.remove();}this._clickListeners=[];}},componentDidUpdate:function j(k,l){if(!l.isThreadEligible&&this.state.isThreadEligible)this.bindClickListeners();},getAmountFromTriggerClickEvent:function j(k){var l=k.target.getAttribute('data-p2p-trigger')||'';return l.replace(/[^0-9\.]+/g,'');},handleTriggerClick:function j(k){k.preventDefault();var l=this.getAmountFromTriggerClickEvent(k);this.setState({amount:l});this.openSendView();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_SEND_TRIGGER,{raw_amount:this.state.amount,currency:'USD'});},openSendView:function j(){c('P2PActions').chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount});},render:function j(){var k=c('p2pTriggerJSXDOMToString')(this.props.text,this.props.renderEmoji,this.props.renderEmoticons,this.state.isThreadEligible,this.props.isSupportedEmoji,this.props.getMessengerEmote);return c('React').createElement('span',{dangerouslySetInnerHTML:{__html:k}});}});f.exports=i;}),null);
__d('TextWithEntitiesAndP2P.react',['BaseTextWithEntities.react','Link.react','P2PTriggers.react','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'TextWithEntitiesAndP2P',_renderText:function i(j){return c('React').createElement(c('P2PTriggers.react'),{getMessengerEmote:this.props.getMessengerEmote,isSupportedEmoji:this.props.isSupportedEmoji,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,text:j,threadID:this.props.threadID});},_renderRange:function i(j,k){if(this.props.interpolator){return this.props.interpolator(j,k);}else return c('React').createElement(c('Link.react'),{href:k.entity},j);},render:function i(){return c('React').createElement(c('BaseTextWithEntities.react'),babelHelpers['extends']({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text}));}});f.exports=h;}),null);